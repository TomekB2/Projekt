{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Type, TemplateRef, ComponentRef, ChangeDetectorRef, InjectionToken, Injectable, Optional, Directive, Input, ViewContainerRef, Component, ViewChild, EventEmitter, ChangeDetectionStrategy, Output, ContentChildren, Inject, ViewChildren, NgModule } from '@angular/core';\nimport * as i2 from '@angular/forms';\nimport { AbstractControl, FormGroup, FormArray, FormControl, NgControl, Validators } from '@angular/forms';\nimport { isObservable, merge, of, Observable, Subject } from 'rxjs';\nimport { distinctUntilChanged, startWith, debounceTime, filter, switchMap, take, tap, map } from 'rxjs/operators';\nimport * as i2$1 from '@angular/common';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport * as i1 from '@angular/platform-browser';\nconst _c0 = [\"container\"];\nfunction FormlyField_ng_template_0_Template(rf, ctx) {}\nfunction FormlyGroup_formly_field_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"formly-field\", 1);\n  }\n  if (rf & 2) {\n    const f_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"field\", f_r1);\n  }\n}\nconst _c1 = [\"*\"];\nconst _c2 = [\"fieldComponent\"];\nfunction disableTreeValidityCall(form, callback) {\n  const _updateTreeValidity = form._updateTreeValidity.bind(form);\n  form._updateTreeValidity = () => {};\n  callback();\n  form._updateTreeValidity = _updateTreeValidity;\n}\nfunction getFieldId(formId, field, index) {\n  if (field.id) {\n    return field.id;\n  }\n  let type = field.type;\n  if (!type && field.template) {\n    type = 'template';\n  }\n  if (type instanceof Type) {\n    type = type.prototype.constructor.name;\n  }\n  return [formId, type, field.key, index].join('_');\n}\nfunction hasKey(field) {\n  return !isNil(field.key) && field.key !== '';\n}\nfunction getKeyPath(field) {\n  if (!hasKey(field)) {\n    return [];\n  }\n  /* We store the keyPath in the field for performance reasons. This function will be called frequently. */\n  if (field._keyPath?.key !== field.key) {\n    let path = [];\n    if (typeof field.key === 'string') {\n      const key = field.key.indexOf('[') === -1 ? field.key : field.key.replace(/\\[(\\w+)\\]/g, '.$1');\n      path = key.indexOf('.') !== -1 ? key.split('.') : [key];\n    } else if (Array.isArray(field.key)) {\n      path = field.key.slice(0);\n    } else {\n      path = [`${field.key}`];\n    }\n    defineHiddenProp(field, '_keyPath', {\n      key: field.key,\n      path\n    });\n  }\n  return field._keyPath.path.slice(0);\n}\nconst FORMLY_VALIDATORS = ['required', 'pattern', 'minLength', 'maxLength', 'min', 'max'];\nfunction assignFieldValue(field, value) {\n  let paths = getKeyPath(field);\n  if (paths.length === 0) {\n    return;\n  }\n  let root = field;\n  while (root.parent) {\n    root = root.parent;\n    paths = [...getKeyPath(root), ...paths];\n  }\n  if (value === undefined && field.resetOnHide) {\n    const k = paths.pop();\n    const m = paths.reduce((model, path) => model[path] || {}, root.model);\n    delete m[k];\n    return;\n  }\n  assignModelValue(root.model, paths, value);\n}\nfunction assignModelValue(model, paths, value) {\n  for (let i = 0; i < paths.length - 1; i++) {\n    const path = paths[i];\n    if (!model[path] || !isObject(model[path])) {\n      model[path] = /^\\d+$/.test(paths[i + 1]) ? [] : {};\n    }\n    model = model[path];\n  }\n  model[paths[paths.length - 1]] = clone(value);\n}\nfunction getFieldValue(field) {\n  let model = field.parent ? field.parent.model : field.model;\n  for (const path of getKeyPath(field)) {\n    if (!model) {\n      return model;\n    }\n    model = model[path];\n  }\n  return model;\n}\nfunction reverseDeepMerge(dest, ...args) {\n  args.forEach(src => {\n    for (const srcArg in src) {\n      if (isNil(dest[srcArg]) || isBlankString(dest[srcArg])) {\n        dest[srcArg] = clone(src[srcArg]);\n      } else if (objAndSameType(dest[srcArg], src[srcArg])) {\n        reverseDeepMerge(dest[srcArg], src[srcArg]);\n      }\n    }\n  });\n  return dest;\n}\n// check a value is null or undefined\nfunction isNil(value) {\n  return value == null;\n}\nfunction isUndefined(value) {\n  return value === undefined;\n}\nfunction isBlankString(value) {\n  return value === '';\n}\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\nfunction objAndSameType(obj1, obj2) {\n  return isObject(obj1) && isObject(obj2) && Object.getPrototypeOf(obj1) === Object.getPrototypeOf(obj2) && !(Array.isArray(obj1) || Array.isArray(obj2));\n}\nfunction isObject(x) {\n  return x != null && typeof x === 'object';\n}\nfunction isPromise(obj) {\n  return !!obj && typeof obj.then === 'function';\n}\nfunction clone(value) {\n  if (!isObject(value) || isObservable(value) || value instanceof TemplateRef || /* instanceof SafeHtmlImpl */value.changingThisBreaksApplicationSecurity || ['RegExp', 'FileList', 'File', 'Blob'].indexOf(value.constructor.name) !== -1) {\n    return value;\n  }\n  if (value instanceof Set) {\n    return new Set(value);\n  }\n  if (value instanceof Map) {\n    return new Map(value);\n  }\n  // https://github.com/moment/moment/blob/master/moment.js#L252\n  if (value._isAMomentObject && isFunction(value.clone)) {\n    return value.clone();\n  }\n  if (value instanceof AbstractControl) {\n    return null;\n  }\n  if (value instanceof Date) {\n    return new Date(value.getTime());\n  }\n  if (Array.isArray(value)) {\n    return value.slice(0).map(v => clone(v));\n  }\n  // best way to clone a js object maybe\n  // https://stackoverflow.com/questions/41474986/how-to-clone-a-javascript-es6-class-instance\n  const proto = Object.getPrototypeOf(value);\n  let c = Object.create(proto);\n  c = Object.setPrototypeOf(c, proto);\n  // need to make a deep copy so we dont use Object.assign\n  // also Object.assign wont copy property descriptor exactly\n  return Object.keys(value).reduce((newVal, prop) => {\n    const propDesc = Object.getOwnPropertyDescriptor(value, prop);\n    if (propDesc.get) {\n      Object.defineProperty(newVal, prop, propDesc);\n    } else {\n      newVal[prop] = clone(value[prop]);\n    }\n    return newVal;\n  }, c);\n}\nfunction defineHiddenProp(field, prop, defaultValue) {\n  Object.defineProperty(field, prop, {\n    enumerable: false,\n    writable: true,\n    configurable: true\n  });\n  field[prop] = defaultValue;\n}\nfunction observeDeep(source, paths, setFn) {\n  let observers = [];\n  const unsubscribe = () => {\n    observers.forEach(observer => observer());\n    observers = [];\n  };\n  const observer = observe(source, paths, ({\n    firstChange,\n    currentValue\n  }) => {\n    !firstChange && setFn();\n    unsubscribe();\n    if (isObject(currentValue) && currentValue.constructor.name === 'Object') {\n      Object.keys(currentValue).forEach(prop => {\n        observers.push(observeDeep(source, [...paths, prop], setFn));\n      });\n    }\n  });\n  return () => {\n    observer.unsubscribe();\n    unsubscribe();\n  };\n}\nfunction observe(o, paths, setFn) {\n  if (!o._observers) {\n    defineHiddenProp(o, '_observers', {});\n  }\n  let target = o;\n  for (let i = 0; i < paths.length - 1; i++) {\n    if (!target[paths[i]] || !isObject(target[paths[i]])) {\n      target[paths[i]] = /^\\d+$/.test(paths[i + 1]) ? [] : {};\n    }\n    target = target[paths[i]];\n  }\n  const key = paths[paths.length - 1];\n  const prop = paths.join('.');\n  if (!o._observers[prop]) {\n    o._observers[prop] = {\n      value: target[key],\n      onChange: []\n    };\n  }\n  const state = o._observers[prop];\n  if (target[key] !== state.value) {\n    state.value = target[key];\n  }\n  if (state.onChange.indexOf(setFn) === -1) {\n    state.onChange.push(setFn);\n    setFn({\n      currentValue: state.value,\n      firstChange: true\n    });\n    if (state.onChange.length >= 1 && isObject(target)) {\n      const {\n        enumerable\n      } = Object.getOwnPropertyDescriptor(target, key) || {\n        enumerable: true\n      };\n      Object.defineProperty(target, key, {\n        enumerable,\n        configurable: true,\n        get: () => state.value,\n        set: currentValue => {\n          if (currentValue !== state.value) {\n            const previousValue = state.value;\n            state.value = currentValue;\n            state.onChange.forEach(changeFn => changeFn({\n              previousValue,\n              currentValue,\n              firstChange: false\n            }));\n          }\n        }\n      });\n    }\n  }\n  return {\n    setValue(value) {\n      state.value = value;\n    },\n    unsubscribe() {\n      state.onChange = state.onChange.filter(changeFn => changeFn !== setFn);\n      if (state.onChange.length === 0) {\n        delete o._observers[prop];\n      }\n    }\n  };\n}\nfunction getField(f, key) {\n  key = Array.isArray(key) ? key.join('.') : key;\n  if (!f.fieldGroup) {\n    return undefined;\n  }\n  for (let i = 0, len = f.fieldGroup.length; i < len; i++) {\n    const c = f.fieldGroup[i];\n    const k = Array.isArray(c.key) ? c.key.join('.') : c.key;\n    if (k === key) {\n      return c;\n    }\n    if (c.fieldGroup && (isNil(k) || key.indexOf(`${k}.`) === 0)) {\n      const field = getField(c, isNil(k) ? key : key.slice(k.length + 1));\n      if (field) {\n        return field;\n      }\n    }\n  }\n  return undefined;\n}\nfunction markFieldForCheck(field) {\n  field._componentRefs?.forEach(ref => {\n    // NOTE: we cannot use ref.changeDetectorRef, see https://github.com/ngx-formly/ngx-formly/issues/2191\n    if (ref instanceof ComponentRef) {\n      const changeDetectorRef = ref.injector.get(ChangeDetectorRef);\n      changeDetectorRef.markForCheck();\n    } else {\n      ref.markForCheck();\n    }\n  });\n}\n\n/**\n * An InjectionToken for registering additional formly config options (types, wrappers ...).\n */\nconst FORMLY_CONFIG = new InjectionToken('FORMLY_CONFIG');\n/**\n * Maintains list of formly config options. This can be used to register new field type.\n */\nclass FormlyConfig {\n  constructor() {\n    this.types = {};\n    this.validators = {};\n    this.wrappers = {};\n    this.messages = {};\n    this.extras = {\n      checkExpressionOn: 'modelChange',\n      lazyRender: true,\n      resetFieldOnHide: true,\n      renderFormlyFieldElement: true,\n      showError(field) {\n        return field.formControl?.invalid && (field.formControl?.touched || field.options.parentForm?.submitted || !!field.field.validation?.show);\n      }\n    };\n    this.extensions = {};\n    this.presets = {};\n    this.extensionsByPriority = {};\n  }\n  addConfig(config) {\n    if (config.types) {\n      config.types.forEach(type => this.setType(type));\n    }\n    if (config.validators) {\n      config.validators.forEach(validator => this.setValidator(validator));\n    }\n    if (config.wrappers) {\n      config.wrappers.forEach(wrapper => this.setWrapper(wrapper));\n    }\n    if (config.validationMessages) {\n      config.validationMessages.forEach(validation => this.addValidatorMessage(validation.name, validation.message));\n    }\n    if (config.extensions) {\n      this.setSortedExtensions(config.extensions);\n    }\n    if (config.extras) {\n      this.extras = {\n        ...this.extras,\n        ...config.extras\n      };\n    }\n    if (config.presets) {\n      this.presets = {\n        ...this.presets,\n        ...config.presets.reduce((acc, curr) => ({\n          ...acc,\n          [curr.name]: curr.config\n        }), {})\n      };\n    }\n  }\n  /**\n   * Allows you to specify a custom type which you can use in your field configuration.\n   * You can pass an object of options, or an array of objects of options.\n   */\n  setType(options) {\n    if (Array.isArray(options)) {\n      options.forEach(option => this.setType(option));\n    } else {\n      if (!this.types[options.name]) {\n        this.types[options.name] = {\n          name: options.name\n        };\n      }\n      ['component', 'extends', 'defaultOptions', 'wrappers'].forEach(prop => {\n        if (options.hasOwnProperty(prop)) {\n          this.types[options.name][prop] = options[prop];\n        }\n      });\n    }\n  }\n  getType(name, throwIfNotFound = false) {\n    if (name instanceof Type) {\n      return {\n        component: name,\n        name: name.prototype.constructor.name\n      };\n    }\n    if (!this.types[name]) {\n      if (throwIfNotFound) {\n        throw new Error(`[Formly Error] The type \"${name}\" could not be found. Please make sure that is registered through the FormlyModule declaration.`);\n      }\n      return null;\n    }\n    this.mergeExtendedType(name);\n    return this.types[name];\n  }\n  /** @ignore */\n  getMergedField(field = {}) {\n    const type = this.getType(field.type);\n    if (!type) {\n      return;\n    }\n    if (type.defaultOptions) {\n      reverseDeepMerge(field, type.defaultOptions);\n    }\n    const extendDefaults = type.extends && this.getType(type.extends).defaultOptions;\n    if (extendDefaults) {\n      reverseDeepMerge(field, extendDefaults);\n    }\n    if (field?.optionsTypes) {\n      field.optionsTypes.forEach(option => {\n        const defaultOptions = this.getType(option).defaultOptions;\n        if (defaultOptions) {\n          reverseDeepMerge(field, defaultOptions);\n        }\n      });\n    }\n    const componentRef = this.resolveFieldTypeRef(field);\n    if (componentRef?.instance?.defaultOptions) {\n      reverseDeepMerge(field, componentRef.instance.defaultOptions);\n    }\n    if (!field.wrappers && type.wrappers) {\n      field.wrappers = [...type.wrappers];\n    }\n  }\n  /** @ignore @internal */\n  resolveFieldTypeRef(field = {}) {\n    const type = this.getType(field.type);\n    if (!type) {\n      return null;\n    }\n    if (!type.component || type._componentRef) {\n      return type._componentRef;\n    }\n    const {\n      _viewContainerRef,\n      _injector\n    } = field.options;\n    if (!_viewContainerRef || !_injector) {\n      return null;\n    }\n    const componentRef = _viewContainerRef.createComponent(type.component, {\n      injector: _injector\n    });\n    defineHiddenProp(type, '_componentRef', componentRef);\n    try {\n      componentRef.destroy();\n    } catch (e) {\n      console.error(`An error occurred while destroying the Formly component type \"${field.type}\"`, e);\n    }\n    return type._componentRef;\n  }\n  setWrapper(options) {\n    this.wrappers[options.name] = options;\n    if (options.types) {\n      options.types.forEach(type => {\n        this.setTypeWrapper(type, options.name);\n      });\n    }\n  }\n  getWrapper(name) {\n    if (name instanceof Type) {\n      return {\n        component: name,\n        name: name.prototype.constructor.name\n      };\n    }\n    if (!this.wrappers[name]) {\n      throw new Error(`[Formly Error] The wrapper \"${name}\" could not be found. Please make sure that is registered through the FormlyModule declaration.`);\n    }\n    return this.wrappers[name];\n  }\n  /** @ignore */\n  setTypeWrapper(type, name) {\n    if (!this.types[type]) {\n      this.types[type] = {};\n    }\n    if (!this.types[type].wrappers) {\n      this.types[type].wrappers = [];\n    }\n    if (this.types[type].wrappers.indexOf(name) === -1) {\n      this.types[type].wrappers.push(name);\n    }\n  }\n  setValidator(options) {\n    this.validators[options.name] = options;\n  }\n  getValidator(name) {\n    if (!this.validators[name]) {\n      throw new Error(`[Formly Error] The validator \"${name}\" could not be found. Please make sure that is registered through the FormlyModule declaration.`);\n    }\n    return this.validators[name];\n  }\n  addValidatorMessage(name, message) {\n    this.messages[name] = message;\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      const deprecated = {\n        minlength: 'minLength',\n        maxlength: 'maxLength'\n      };\n      if (deprecated[name]) {\n        console.warn(`Formly deprecation: passing validation messages key '${name}' is deprecated since v6.0, use '${deprecated[name]}' instead.`);\n        this.messages[deprecated[name]] = message;\n      }\n    }\n  }\n  getValidatorMessage(name) {\n    return this.messages[name];\n  }\n  setSortedExtensions(extensionOptions) {\n    // insert new extensions, grouped by priority\n    extensionOptions.forEach(extensionOption => {\n      const priority = extensionOption.priority ?? 1;\n      this.extensionsByPriority[priority] = {\n        ...this.extensionsByPriority[priority],\n        [extensionOption.name]: extensionOption.extension\n      };\n    });\n    // flatten extensions object with sorted keys\n    this.extensions = Object.keys(this.extensionsByPriority).map(Number).sort((a, b) => a - b).reduce((acc, prio) => ({\n      ...acc,\n      ...this.extensionsByPriority[prio]\n    }), {});\n  }\n  mergeExtendedType(name) {\n    if (!this.types[name].extends) {\n      return;\n    }\n    const extendedType = this.getType(this.types[name].extends);\n    if (!this.types[name].component) {\n      this.types[name].component = extendedType.component;\n    }\n    if (!this.types[name].wrappers) {\n      this.types[name].wrappers = extendedType.wrappers;\n    }\n  }\n}\nFormlyConfig.ɵfac = function FormlyConfig_Factory(t) {\n  return new (t || FormlyConfig)();\n};\nFormlyConfig.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: FormlyConfig,\n  factory: FormlyConfig.ɵfac,\n  providedIn: 'root'\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FormlyConfig, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\nclass FormlyFormBuilder {\n  constructor(config, injector, viewContainerRef, parentForm) {\n    this.config = config;\n    this.injector = injector;\n    this.viewContainerRef = viewContainerRef;\n    this.parentForm = parentForm;\n  }\n  buildForm(form, fieldGroup = [], model, options) {\n    this.build({\n      fieldGroup,\n      model,\n      form,\n      options\n    });\n  }\n  build(field) {\n    if (!this.config.extensions.core) {\n      throw new Error('NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.');\n    }\n    if (!field.parent) {\n      this._setOptions(field);\n      disableTreeValidityCall(field.form, () => {\n        this._build(field);\n        const options = field.options;\n        options.checkExpressions?.(field, true);\n        options.detectChanges?.(field);\n      });\n    } else {\n      this._build(field);\n    }\n  }\n  _build(field) {\n    if (!field) {\n      return;\n    }\n    const extensions = Object.values(this.config.extensions);\n    extensions.forEach(extension => extension.prePopulate?.(field));\n    extensions.forEach(extension => extension.onPopulate?.(field));\n    field.fieldGroup?.forEach(f => this._build(f));\n    extensions.forEach(extension => extension.postPopulate?.(field));\n  }\n  _setOptions(field) {\n    field.form = field.form || new FormGroup({});\n    field.model = field.model || {};\n    field.options = field.options || {};\n    const options = field.options;\n    if (!options._viewContainerRef) {\n      defineHiddenProp(options, '_viewContainerRef', this.viewContainerRef);\n    }\n    if (!options._injector) {\n      defineHiddenProp(options, '_injector', this.injector);\n    }\n    if (!options.build) {\n      options._buildForm = () => {\n        console.warn(`Formly: 'options._buildForm' is deprecated since v6.0, use 'options.build' instead.`);\n        this.build(field);\n      };\n      options.build = (f = field) => {\n        this.build(f);\n        return f;\n      };\n    }\n    if (!options.parentForm && this.parentForm) {\n      defineHiddenProp(options, 'parentForm', this.parentForm);\n      observe(options, ['parentForm', 'submitted'], ({\n        firstChange\n      }) => {\n        if (!firstChange) {\n          options.checkExpressions(field);\n          options.detectChanges(field);\n        }\n      });\n    }\n  }\n}\nFormlyFormBuilder.ɵfac = function FormlyFormBuilder_Factory(t) {\n  return new (t || FormlyFormBuilder)(i0.ɵɵinject(FormlyConfig), i0.ɵɵinject(i0.Injector), i0.ɵɵinject(i0.ViewContainerRef, 8), i0.ɵɵinject(i2.FormGroupDirective, 8));\n};\nFormlyFormBuilder.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: FormlyFormBuilder,\n  factory: FormlyFormBuilder.ɵfac,\n  providedIn: 'root'\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FormlyFormBuilder, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: FormlyConfig\n    }, {\n      type: i0.Injector\n    }, {\n      type: i0.ViewContainerRef,\n      decorators: [{\n        type: Optional\n      }]\n    }, {\n      type: i2.FormGroupDirective,\n      decorators: [{\n        type: Optional\n      }]\n    }];\n  }, null);\n})();\nfunction unregisterControl(field, emitEvent = false) {\n  const control = field.formControl;\n  const fieldIndex = control._fields ? control._fields.indexOf(field) : -1;\n  if (fieldIndex !== -1) {\n    control._fields.splice(fieldIndex, 1);\n  }\n  const form = control.parent;\n  if (!form) {\n    return;\n  }\n  const opts = {\n    emitEvent\n  };\n  if (form instanceof FormArray) {\n    const key = form.controls.findIndex(c => c === control);\n    if (key !== -1) {\n      form.removeAt(key, opts);\n    }\n  } else if (form instanceof FormGroup) {\n    const paths = getKeyPath(field);\n    const key = paths[paths.length - 1];\n    if (form.get([key]) === control) {\n      form.removeControl(key, opts);\n    }\n  }\n  control.setParent(null);\n}\nfunction findControl(field) {\n  if (field.formControl) {\n    return field.formControl;\n  }\n  if (field.shareFormControl === false) {\n    return null;\n  }\n  return field.form?.get(getKeyPath(field));\n}\nfunction registerControl(field, control, emitEvent = false) {\n  control = control || field.formControl;\n  if (!control._fields) {\n    defineHiddenProp(control, '_fields', []);\n  }\n  if (control._fields.indexOf(field) === -1) {\n    control._fields.push(field);\n  }\n  if (!field.formControl && control) {\n    defineHiddenProp(field, 'formControl', control);\n    control.setValidators(null);\n    control.setAsyncValidators(null);\n    field.props.disabled = !!field.props.disabled;\n    const disabledObserver = observe(field, ['props', 'disabled'], ({\n      firstChange,\n      currentValue\n    }) => {\n      if (!firstChange) {\n        currentValue ? field.formControl.disable() : field.formControl.enable();\n      }\n    });\n    if (control instanceof FormControl) {\n      control.registerOnDisabledChange(disabledObserver.setValue);\n    }\n  }\n  if (!field.form || !hasKey(field)) {\n    return;\n  }\n  let form = field.form;\n  const paths = getKeyPath(field);\n  const value = getFieldValue(field);\n  if (!(isNil(control.value) && isNil(value)) && control.value !== value && control instanceof FormControl) {\n    control.patchValue(value);\n  }\n  for (let i = 0; i < paths.length - 1; i++) {\n    const path = paths[i];\n    if (!form.get([path])) {\n      form.setControl(path, new FormGroup({}), {\n        emitEvent\n      });\n    }\n    form = form.get([path]);\n  }\n  const key = paths[paths.length - 1];\n  if (!field._hide && form.get([key]) !== control) {\n    form.setControl(key, control, {\n      emitEvent\n    });\n  }\n}\nfunction updateValidity(c, onlySelf = false) {\n  const status = c.status;\n  const value = c.value;\n  c.updateValueAndValidity({\n    emitEvent: false,\n    onlySelf\n  });\n  if (status !== c.status) {\n    c.statusChanges.emit(c.status);\n  }\n  if (value !== c.value) {\n    c.valueChanges.emit(c.value);\n  }\n}\nfunction clearControl(form) {\n  delete form?._fields;\n  form.setValidators(null);\n  form.setAsyncValidators(null);\n  if (form instanceof FormGroup || form instanceof FormArray) {\n    Object.values(form.controls).forEach(c => clearControl(c));\n  }\n}\nclass FormlyTemplate {\n  constructor(ref) {\n    this.ref = ref;\n  }\n  ngOnChanges() {\n    this.name = this.name || 'formly-group';\n  }\n}\nFormlyTemplate.ɵfac = function FormlyTemplate_Factory(t) {\n  return new (t || FormlyTemplate)(i0.ɵɵdirectiveInject(i0.TemplateRef));\n};\nFormlyTemplate.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: FormlyTemplate,\n  selectors: [[\"\", \"formlyTemplate\", \"\"]],\n  inputs: {\n    name: [\"formlyTemplate\", \"name\"]\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FormlyTemplate, [{\n    type: Directive,\n    args: [{\n      selector: '[formlyTemplate]'\n    }]\n  }], function () {\n    return [{\n      type: i0.TemplateRef\n    }];\n  }, {\n    name: [{\n      type: Input,\n      args: ['formlyTemplate']\n    }]\n  });\n})();\n// workarround for https://github.com/angular/angular/issues/43227#issuecomment-904173738\nclass FormlyFieldTemplates {}\nFormlyFieldTemplates.ɵfac = function FormlyFieldTemplates_Factory(t) {\n  return new (t || FormlyFieldTemplates)();\n};\nFormlyFieldTemplates.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: FormlyFieldTemplates,\n  factory: FormlyFieldTemplates.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FormlyFieldTemplates, [{\n    type: Injectable\n  }], null, null);\n})();\n\n/**\n * The `<formly-field>` component is used to render the UI widget (layout + type) of a given `field`.\n */\nclass FormlyField {\n  constructor(config, renderer, _elementRef, hostContainerRef, form) {\n    this.config = config;\n    this.renderer = renderer;\n    this._elementRef = _elementRef;\n    this.hostContainerRef = hostContainerRef;\n    this.form = form;\n    this.hostObservers = [];\n    this.componentRefs = [];\n    this.hooksObservers = [];\n    this.detectFieldBuild = false;\n    this.valueChangesUnsubscribe = () => {};\n  }\n  get containerRef() {\n    return this.config.extras.renderFormlyFieldElement ? this.viewContainerRef : this.hostContainerRef;\n  }\n  get elementRef() {\n    if (this.config.extras.renderFormlyFieldElement) {\n      return this._elementRef;\n    }\n    if (this.componentRefs?.[0] instanceof ComponentRef) {\n      return this.componentRefs[0].location;\n    }\n    return null;\n  }\n  ngAfterContentInit() {\n    this.triggerHook('afterContentInit');\n  }\n  ngAfterViewInit() {\n    this.triggerHook('afterViewInit');\n  }\n  ngDoCheck() {\n    if (this.detectFieldBuild && this.field && this.field.options) {\n      this.render();\n    }\n  }\n  ngOnInit() {\n    this.triggerHook('onInit');\n  }\n  ngOnChanges(changes) {\n    this.triggerHook('onChanges', changes);\n  }\n  ngOnDestroy() {\n    this.resetRefs(this.field);\n    this.hostObservers.forEach(hostObserver => hostObserver.unsubscribe());\n    this.hooksObservers.forEach(unsubscribe => unsubscribe());\n    this.valueChangesUnsubscribe();\n    this.triggerHook('onDestroy');\n  }\n  renderField(containerRef, f, wrappers = []) {\n    if (this.containerRef === containerRef) {\n      this.resetRefs(this.field);\n      this.containerRef.clear();\n      wrappers = this.field?.wrappers;\n    }\n    if (wrappers?.length > 0) {\n      const [wrapper, ...wps] = wrappers;\n      const {\n        component\n      } = this.config.getWrapper(wrapper);\n      const ref = containerRef.createComponent(component);\n      this.attachComponentRef(ref, f);\n      observe(ref.instance, ['fieldComponent'], ({\n        currentValue,\n        previousValue,\n        firstChange\n      }) => {\n        if (currentValue) {\n          if (previousValue && previousValue._lContainer === currentValue._lContainer) {\n            return;\n          }\n          const viewRef = previousValue ? previousValue.detach() : null;\n          if (viewRef && !viewRef.destroyed) {\n            currentValue.insert(viewRef);\n          } else {\n            this.renderField(currentValue, f, wps);\n          }\n          !firstChange && ref.changeDetectorRef.detectChanges();\n        }\n      });\n    } else if (f?.type) {\n      const inlineType = this.form?.templates?.find(ref => ref.name === f.type);\n      let ref;\n      if (inlineType) {\n        ref = containerRef.createEmbeddedView(inlineType.ref, {\n          $implicit: f\n        });\n      } else {\n        const {\n          component\n        } = this.config.getType(f.type, true);\n        ref = containerRef.createComponent(component);\n      }\n      this.attachComponentRef(ref, f);\n    }\n  }\n  triggerHook(name, changes) {\n    if (name === 'onInit' || name === 'onChanges' && changes.field && !changes.field.firstChange) {\n      this.valueChangesUnsubscribe = this.fieldChanges(this.field);\n    }\n    if (this.field?.hooks?.[name]) {\n      if (!changes || changes.field) {\n        const r = this.field.hooks[name](this.field);\n        if (isObservable(r) && ['onInit', 'afterContentInit', 'afterViewInit'].indexOf(name) !== -1) {\n          const sub = r.subscribe();\n          this.hooksObservers.push(() => sub.unsubscribe());\n        }\n      }\n    }\n    if (name === 'onChanges' && changes.field) {\n      this.resetRefs(changes.field.previousValue);\n      this.render();\n    }\n  }\n  attachComponentRef(ref, field) {\n    this.componentRefs.push(ref);\n    field._componentRefs.push(ref);\n    if (ref instanceof ComponentRef) {\n      Object.assign(ref.instance, {\n        field\n      });\n    }\n  }\n  render() {\n    if (!this.field) {\n      return;\n    }\n    // require Formly build\n    if (!this.field.options) {\n      this.detectFieldBuild = true;\n      return;\n    }\n    this.detectFieldBuild = false;\n    this.hostObservers.forEach(hostObserver => hostObserver.unsubscribe());\n    this.hostObservers = [observe(this.field, ['hide'], ({\n      firstChange,\n      currentValue\n    }) => {\n      const containerRef = this.containerRef;\n      if (this.config.extras.lazyRender === false) {\n        firstChange && this.renderField(containerRef, this.field);\n        if (!firstChange || firstChange && currentValue) {\n          this.elementRef && this.renderer.setStyle(this.elementRef.nativeElement, 'display', currentValue ? 'none' : '');\n        }\n      } else {\n        if (currentValue) {\n          containerRef.clear();\n          if (this.field.className) {\n            this.renderer.removeAttribute(this.elementRef.nativeElement, 'class');\n          }\n        } else {\n          this.renderField(containerRef, this.field);\n          if (this.field.className) {\n            this.renderer.setAttribute(this.elementRef.nativeElement, 'class', this.field.className);\n          }\n        }\n      }\n      !firstChange && this.field.options.detectChanges(this.field);\n    }), observe(this.field, ['className'], ({\n      firstChange,\n      currentValue\n    }) => {\n      if ((!firstChange || firstChange && currentValue) && (!this.config.extras.lazyRender || this.field.hide !== true)) {\n        this.elementRef && this.renderer.setAttribute(this.elementRef.nativeElement, 'class', currentValue);\n      }\n    }), ...['touched', 'pristine', 'status'].map(prop => observe(this.field, ['formControl', prop], ({\n      firstChange\n    }) => !firstChange && markFieldForCheck(this.field)))];\n  }\n  resetRefs(field) {\n    if (field) {\n      if (field._localFields) {\n        field._localFields = [];\n      } else {\n        defineHiddenProp(this.field, '_localFields', []);\n      }\n      if (field._componentRefs) {\n        field._componentRefs = field._componentRefs.filter(ref => this.componentRefs.indexOf(ref) === -1);\n      } else {\n        defineHiddenProp(this.field, '_componentRefs', []);\n      }\n    }\n    this.componentRefs = [];\n  }\n  fieldChanges(field) {\n    this.valueChangesUnsubscribe();\n    if (!field) {\n      return () => {};\n    }\n    const subscribes = [observeDeep(field, ['props'], () => field.options.detectChanges(field))];\n    if (field.options) {\n      subscribes.push(observeDeep(field.options, ['formState'], () => field.options.detectChanges(field)));\n    }\n    for (const key of Object.keys(field._expressions || {})) {\n      const expressionObserver = observe(field, ['_expressions', key], ({\n        currentValue,\n        previousValue\n      }) => {\n        if (previousValue?.subscription) {\n          previousValue.subscription.unsubscribe();\n          previousValue.subscription = null;\n        }\n        if (isObservable(currentValue.value$)) {\n          currentValue.subscription = currentValue.value$.subscribe();\n        }\n      });\n      subscribes.push(() => {\n        if (field._expressions[key]?.subscription) {\n          field._expressions[key].subscription.unsubscribe();\n        }\n        expressionObserver.unsubscribe();\n      });\n    }\n    for (const path of [['template'], ['fieldGroupClassName'], ['validation', 'show']]) {\n      const fieldObserver = observe(field, path, ({\n        firstChange\n      }) => !firstChange && field.options.detectChanges(field));\n      subscribes.push(() => fieldObserver.unsubscribe());\n    }\n    if (field.formControl && !field.fieldGroup) {\n      const control = field.formControl;\n      let valueChanges = control.valueChanges.pipe(distinctUntilChanged((x, y) => {\n        if (x !== y || Array.isArray(x) || isObject(x)) {\n          return false;\n        }\n        return true;\n      }));\n      if (control.value !== getFieldValue(field)) {\n        valueChanges = valueChanges.pipe(startWith(control.value));\n      }\n      const {\n        updateOn,\n        debounce\n      } = field.modelOptions;\n      if ((!updateOn || updateOn === 'change') && debounce?.default > 0) {\n        valueChanges = control.valueChanges.pipe(debounceTime(debounce.default));\n      }\n      const sub = valueChanges.subscribe(value => {\n        // workaround for https://github.com/angular/angular/issues/13792\n        if (control._fields?.length > 1 && control instanceof FormControl) {\n          control.patchValue(value, {\n            emitEvent: false,\n            onlySelf: true\n          });\n        }\n        field.parsers?.forEach(parserFn => value = parserFn(value));\n        if (value !== field.formControl.value) {\n          field.formControl.setValue(value);\n          return;\n        }\n        if (hasKey(field)) {\n          assignFieldValue(field, value);\n        }\n        field.options.fieldChanges.next({\n          value,\n          field,\n          type: 'valueChanges'\n        });\n      });\n      subscribes.push(() => sub.unsubscribe());\n    }\n    let templateFieldsSubs = [];\n    observe(field, ['_localFields'], ({\n      currentValue\n    }) => {\n      templateFieldsSubs.forEach(unsubscribe => unsubscribe());\n      templateFieldsSubs = (currentValue || []).map(f => this.fieldChanges(f));\n    });\n    return () => {\n      subscribes.forEach(unsubscribe => unsubscribe());\n      templateFieldsSubs.forEach(unsubscribe => unsubscribe());\n    };\n  }\n}\nFormlyField.ɵfac = function FormlyField_Factory(t) {\n  return new (t || FormlyField)(i0.ɵɵdirectiveInject(FormlyConfig), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.ViewContainerRef), i0.ɵɵdirectiveInject(FormlyFieldTemplates, 8));\n};\nFormlyField.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: FormlyField,\n  selectors: [[\"formly-field\"]],\n  viewQuery: function FormlyField_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7, ViewContainerRef);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.viewContainerRef = _t.first);\n    }\n  },\n  inputs: {\n    field: \"field\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 2,\n  vars: 0,\n  consts: [[\"container\", \"\"]],\n  template: function FormlyField_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, FormlyField_ng_template_0_Template, 0, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n    }\n  },\n  styles: [\"[_nghost-%COMP%]:empty{display:none}\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FormlyField, [{\n    type: Component,\n    args: [{\n      selector: 'formly-field',\n      template: '<ng-template #container></ng-template>',\n      styles: [\":host:empty{display:none}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: FormlyConfig\n    }, {\n      type: i0.Renderer2\n    }, {\n      type: i0.ElementRef\n    }, {\n      type: i0.ViewContainerRef\n    }, {\n      type: FormlyFieldTemplates,\n      decorators: [{\n        type: Optional\n      }]\n    }];\n  }, {\n    field: [{\n      type: Input\n    }],\n    viewContainerRef: [{\n      type: ViewChild,\n      args: ['container', {\n        read: ViewContainerRef,\n        static: true\n      }]\n    }]\n  });\n})();\n\n/**\n * The `<form-form>` component is the main container of the form,\n * which takes care of managing the form state\n * and delegates the rendering of each field to `<formly-field>` component.\n */\nclass FormlyForm {\n  constructor(builder, config, ngZone, fieldTemplates) {\n    this.builder = builder;\n    this.config = config;\n    this.ngZone = ngZone;\n    this.fieldTemplates = fieldTemplates;\n    /** Event that is emitted when the model value is changed */\n    this.modelChange = new EventEmitter();\n    this.field = {\n      type: 'formly-group'\n    };\n    this._modelChangeValue = {};\n    this.valueChangesUnsubscribe = () => {};\n  }\n  /** The form instance which allow to track model value and validation status. */\n  set form(form) {\n    this.field.form = form;\n  }\n  get form() {\n    return this.field.form;\n  }\n  /** The model to be represented by the form. */\n  set model(model) {\n    if (this.config.extras.immutable && this._modelChangeValue === model) {\n      return;\n    }\n    this.setField({\n      model\n    });\n  }\n  get model() {\n    return this.field.model;\n  }\n  /** The field configurations for building the form. */\n  set fields(fieldGroup) {\n    this.setField({\n      fieldGroup\n    });\n  }\n  get fields() {\n    return this.field.fieldGroup;\n  }\n  /** Options for the form. */\n  set options(options) {\n    this.setField({\n      options\n    });\n  }\n  get options() {\n    return this.field.options;\n  }\n  set templates(templates) {\n    this.fieldTemplates.templates = templates;\n  }\n  ngDoCheck() {\n    if (this.config.extras.checkExpressionOn === 'changeDetectionCheck') {\n      this.checkExpressionChange();\n    }\n  }\n  ngOnChanges(changes) {\n    if (changes.fields && this.form) {\n      clearControl(this.form);\n    }\n    if (changes.fields || changes.form || changes.model && this._modelChangeValue !== changes.model.currentValue) {\n      this.valueChangesUnsubscribe();\n      this.builder.build(this.field);\n      this.valueChangesUnsubscribe = this.valueChanges();\n    }\n  }\n  ngOnDestroy() {\n    this.valueChangesUnsubscribe();\n  }\n  checkExpressionChange() {\n    this.field.options.checkExpressions?.(this.field);\n  }\n  valueChanges() {\n    this.valueChangesUnsubscribe();\n    const sub = this.field.options.fieldChanges.pipe(filter(({\n      field,\n      type\n    }) => hasKey(field) && type === 'valueChanges'), switchMap(() => this.ngZone.onStable.asObservable().pipe(take(1)))).subscribe(() => this.ngZone.runGuarded(() => {\n      // runGuarded is used to keep in sync the expression changes\n      // https://github.com/ngx-formly/ngx-formly/issues/2095\n      this.checkExpressionChange();\n      this.modelChange.emit(this._modelChangeValue = clone(this.model));\n    }));\n    return () => sub.unsubscribe();\n  }\n  setField(field) {\n    if (this.config.extras.immutable) {\n      this.field = {\n        ...this.field,\n        ...clone(field)\n      };\n    } else {\n      Object.keys(field).forEach(p => this.field[p] = field[p]);\n    }\n  }\n}\nFormlyForm.ɵfac = function FormlyForm_Factory(t) {\n  return new (t || FormlyForm)(i0.ɵɵdirectiveInject(FormlyFormBuilder), i0.ɵɵdirectiveInject(FormlyConfig), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(FormlyFieldTemplates));\n};\nFormlyForm.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: FormlyForm,\n  selectors: [[\"formly-form\"]],\n  contentQueries: function FormlyForm_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      i0.ɵɵcontentQuery(dirIndex, FormlyTemplate, 4);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.templates = _t);\n    }\n  },\n  inputs: {\n    form: \"form\",\n    model: \"model\",\n    fields: \"fields\",\n    options: \"options\"\n  },\n  outputs: {\n    modelChange: \"modelChange\"\n  },\n  features: [i0.ɵɵProvidersFeature([FormlyFormBuilder, FormlyFieldTemplates]), i0.ɵɵNgOnChangesFeature],\n  decls: 1,\n  vars: 1,\n  consts: [[3, \"field\"]],\n  template: function FormlyForm_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"formly-field\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"field\", ctx.field);\n    }\n  },\n  dependencies: [FormlyField],\n  encapsulation: 2,\n  changeDetection: 0\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FormlyForm, [{\n    type: Component,\n    args: [{\n      selector: 'formly-form',\n      template: '<formly-field [field]=\"field\"></formly-field>',\n      providers: [FormlyFormBuilder, FormlyFieldTemplates],\n      changeDetection: ChangeDetectionStrategy.OnPush\n    }]\n  }], function () {\n    return [{\n      type: FormlyFormBuilder\n    }, {\n      type: FormlyConfig\n    }, {\n      type: i0.NgZone\n    }, {\n      type: FormlyFieldTemplates\n    }];\n  }, {\n    form: [{\n      type: Input\n    }],\n    model: [{\n      type: Input\n    }],\n    fields: [{\n      type: Input\n    }],\n    options: [{\n      type: Input\n    }],\n    modelChange: [{\n      type: Output\n    }],\n    templates: [{\n      type: ContentChildren,\n      args: [FormlyTemplate]\n    }]\n  });\n})();\n\n/**\n * Allow to link the `field` HTML attributes (`id`, `name` ...) and Event attributes (`focus`, `blur` ...) to an element in the DOM.\n */\nclass FormlyAttributes {\n  constructor(renderer, elementRef, _document) {\n    this.renderer = renderer;\n    this.elementRef = elementRef;\n    this.uiAttributesCache = {};\n    /**\n     * HostBinding doesn't register listeners conditionally which may produce some perf issues.\n     *\n     * Formly issue: https://github.com/ngx-formly/ngx-formly/issues/1991\n     */\n    this.uiEvents = {\n      listeners: [],\n      events: ['click', 'keyup', 'keydown', 'keypress', 'focus', 'blur', 'change'],\n      callback: (eventName, $event) => {\n        switch (eventName) {\n          case 'focus':\n            return this.onFocus($event);\n          case 'blur':\n            return this.onBlur($event);\n          case 'change':\n            return this.onChange($event);\n          default:\n            return this.props[eventName](this.field, $event);\n        }\n      }\n    };\n    this.document = _document;\n  }\n  get props() {\n    return this.field.props || {};\n  }\n  get fieldAttrElements() {\n    return this.field?.['_elementRefs'] || [];\n  }\n  ngOnChanges(changes) {\n    if (changes.field) {\n      this.field.name && this.setAttribute('name', this.field.name);\n      this.uiEvents.listeners.forEach(listener => listener());\n      this.uiEvents.events.forEach(eventName => {\n        if (this.props?.[eventName] || ['focus', 'blur', 'change'].indexOf(eventName) !== -1) {\n          this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement, eventName, e => this.uiEvents.callback(eventName, e)));\n        }\n      });\n      if (this.props?.attributes) {\n        observe(this.field, ['props', 'attributes'], ({\n          currentValue,\n          previousValue\n        }) => {\n          if (previousValue) {\n            Object.keys(previousValue).forEach(attr => this.removeAttribute(attr));\n          }\n          if (currentValue) {\n            Object.keys(currentValue).forEach(attr => {\n              if (currentValue[attr] != null) {\n                this.setAttribute(attr, currentValue[attr]);\n              }\n            });\n          }\n        });\n      }\n      this.detachElementRef(changes.field.previousValue);\n      this.attachElementRef(changes.field.currentValue);\n      if (this.fieldAttrElements.length === 1) {\n        !this.id && this.field.id && this.setAttribute('id', this.field.id);\n        this.focusObserver = observe(this.field, ['focus'], ({\n          currentValue\n        }) => {\n          this.toggleFocus(currentValue);\n        });\n      }\n    }\n    if (changes.id) {\n      this.setAttribute('id', this.id);\n    }\n  }\n  /**\n   * We need to re-evaluate all the attributes on every change detection cycle, because\n   * by using a HostBinding we run into certain edge cases. This means that whatever logic\n   * is in here has to be super lean or we risk seriously damaging or destroying the performance.\n   *\n   * Formly issue: https://github.com/ngx-formly/ngx-formly/issues/1317\n   * Material issue: https://github.com/angular/components/issues/14024\n   */\n  ngDoCheck() {\n    if (!this.uiAttributes) {\n      const element = this.elementRef.nativeElement;\n      this.uiAttributes = [...FORMLY_VALIDATORS, 'tabindex', 'placeholder', 'readonly', 'disabled', 'step'].filter(attr => !element.hasAttribute || !element.hasAttribute(attr));\n    }\n    this.uiAttributes.forEach(attr => {\n      const value = this.props[attr];\n      if (this.uiAttributesCache[attr] !== value && (!this.props.attributes || !this.props.attributes.hasOwnProperty(attr.toLowerCase()))) {\n        this.uiAttributesCache[attr] = value;\n        if (value || value === 0) {\n          this.setAttribute(attr, value === true ? attr : `${value}`);\n        } else {\n          this.removeAttribute(attr);\n        }\n      }\n    });\n  }\n  ngOnDestroy() {\n    this.uiEvents.listeners.forEach(listener => listener());\n    this.detachElementRef(this.field);\n    this.focusObserver?.unsubscribe();\n  }\n  toggleFocus(value) {\n    const element = this.fieldAttrElements ? this.fieldAttrElements[0] : null;\n    if (!element || !element.nativeElement.focus) {\n      return;\n    }\n    const isFocused = !!this.document.activeElement && this.fieldAttrElements.some(({\n      nativeElement\n    }) => this.document.activeElement === nativeElement || nativeElement.contains(this.document.activeElement));\n    if (value && !isFocused) {\n      Promise.resolve().then(() => element.nativeElement.focus());\n    } else if (!value && isFocused) {\n      Promise.resolve().then(() => element.nativeElement.blur());\n    }\n  }\n  onFocus($event) {\n    this.focusObserver?.setValue(true);\n    this.props.focus?.(this.field, $event);\n  }\n  onBlur($event) {\n    this.focusObserver?.setValue(false);\n    this.props.blur?.(this.field, $event);\n  }\n  // handle custom `change` event, for regular ones rely on DOM listener\n  onHostChange($event) {\n    if ($event instanceof Event) {\n      return;\n    }\n    this.onChange($event);\n  }\n  onChange($event) {\n    this.props.change?.(this.field, $event);\n    this.field.formControl?.markAsDirty();\n  }\n  attachElementRef(f) {\n    if (!f) {\n      return;\n    }\n    if (f['_elementRefs']?.indexOf(this.elementRef) === -1) {\n      f['_elementRefs'].push(this.elementRef);\n    } else {\n      defineHiddenProp(f, '_elementRefs', [this.elementRef]);\n    }\n  }\n  detachElementRef(f) {\n    const index = f?.['_elementRefs'] ? this.fieldAttrElements.indexOf(this.elementRef) : -1;\n    if (index !== -1) {\n      f['_elementRefs'].splice(index, 1);\n    }\n  }\n  setAttribute(attr, value) {\n    this.renderer.setAttribute(this.elementRef.nativeElement, attr, value);\n  }\n  removeAttribute(attr) {\n    this.renderer.removeAttribute(this.elementRef.nativeElement, attr);\n  }\n}\nFormlyAttributes.ɵfac = function FormlyAttributes_Factory(t) {\n  return new (t || FormlyAttributes)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(DOCUMENT));\n};\nFormlyAttributes.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: FormlyAttributes,\n  selectors: [[\"\", \"formlyAttributes\", \"\"]],\n  hostBindings: function FormlyAttributes_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"change\", function FormlyAttributes_change_HostBindingHandler($event) {\n        return ctx.onHostChange($event);\n      });\n    }\n  },\n  inputs: {\n    field: [\"formlyAttributes\", \"field\"],\n    id: \"id\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FormlyAttributes, [{\n    type: Directive,\n    args: [{\n      selector: '[formlyAttributes]',\n      host: {\n        '(change)': 'onHostChange($event)'\n      }\n    }]\n  }], function () {\n    return [{\n      type: i0.Renderer2\n    }, {\n      type: i0.ElementRef\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }];\n  }, {\n    field: [{\n      type: Input,\n      args: ['formlyAttributes']\n    }],\n    id: [{\n      type: Input\n    }]\n  });\n})();\nclass FieldType {\n  set controls(controls) {\n    const f = this.field;\n    f._localFields = controls.map(c => c.control._fields || []).flat().filter(f => f.formControl !== this.field.formControl);\n  }\n  get model() {\n    return this.field.model;\n  }\n  get form() {\n    return this.field.form;\n  }\n  get options() {\n    return this.field.options;\n  }\n  get key() {\n    return this.field.key;\n  }\n  get formControl() {\n    return this.field.formControl;\n  }\n  get props() {\n    return this.field.props || {};\n  }\n  /** @deprecated Use `props` instead. */\n  get to() {\n    return this.props;\n  }\n  get showError() {\n    return this.options.showError(this);\n  }\n  get id() {\n    return this.field.id;\n  }\n  get formState() {\n    return this.options.formState || {};\n  }\n}\nFieldType.ɵfac = function FieldType_Factory(t) {\n  return new (t || FieldType)();\n};\nFieldType.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: FieldType,\n  viewQuery: function FieldType_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(NgControl, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.controls = _t);\n    }\n  },\n  inputs: {\n    field: \"field\"\n  }\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FieldType, [{\n    type: Directive\n  }], null, {\n    controls: [{\n      type: ViewChildren,\n      args: [NgControl]\n    }],\n    field: [{\n      type: Input\n    }]\n  });\n})();\n\n/** @ignore */\nclass FormlyGroup extends FieldType {}\nFormlyGroup.ɵfac = /* @__PURE__ */function () {\n  let ɵFormlyGroup_BaseFactory;\n  return function FormlyGroup_Factory(t) {\n    return (ɵFormlyGroup_BaseFactory || (ɵFormlyGroup_BaseFactory = i0.ɵɵgetInheritedFactory(FormlyGroup)))(t || FormlyGroup);\n  };\n}();\nFormlyGroup.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: FormlyGroup,\n  selectors: [[\"formly-group\"]],\n  hostVars: 2,\n  hostBindings: function FormlyGroup_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      i0.ɵɵclassMap(ctx.field.fieldGroupClassName || \"\");\n    }\n  },\n  features: [i0.ɵɵInheritDefinitionFeature],\n  ngContentSelectors: _c1,\n  decls: 2,\n  vars: 1,\n  consts: [[3, \"field\", 4, \"ngFor\", \"ngForOf\"], [3, \"field\"]],\n  template: function FormlyGroup_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵtemplate(0, FormlyGroup_formly_field_0_Template, 1, 1, \"formly-field\", 0);\n      i0.ɵɵprojection(1);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngForOf\", ctx.field.fieldGroup);\n    }\n  },\n  dependencies: [FormlyField, i2$1.NgForOf],\n  encapsulation: 2,\n  changeDetection: 0\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FormlyGroup, [{\n    type: Component,\n    args: [{\n      selector: 'formly-group',\n      template: `\n    <formly-field *ngFor=\"let f of field.fieldGroup\" [field]=\"f\"></formly-field>\n    <ng-content></ng-content>\n  `,\n      host: {\n        '[class]': 'field.fieldGroupClassName || \"\"'\n      },\n      changeDetection: ChangeDetectionStrategy.OnPush\n    }]\n  }], null, null);\n})();\n\n/**\n * The `<formly-validation-message>` component renders the error message of a given `field`.\n */\nclass FormlyValidationMessage {\n  constructor(config) {\n    this.config = config;\n  }\n  ngOnChanges() {\n    const EXPR_VALIDATORS = FORMLY_VALIDATORS.map(v => `templateOptions.${v}`);\n    this.errorMessage$ = merge(this.field.formControl.statusChanges, !this.field.options ? of(null) : this.field.options.fieldChanges.pipe(filter(({\n      field,\n      type,\n      property\n    }) => {\n      return field === this.field && type === 'expressionChanges' && (property.indexOf('validation') !== -1 || EXPR_VALIDATORS.indexOf(property) !== -1);\n    }))).pipe(startWith(null), switchMap(() => isObservable(this.errorMessage) ? this.errorMessage : of(this.errorMessage)));\n  }\n  get errorMessage() {\n    const fieldForm = this.field.formControl;\n    for (const error in fieldForm.errors) {\n      if (fieldForm.errors.hasOwnProperty(error)) {\n        let message = this.config.getValidatorMessage(error);\n        if (isObject(fieldForm.errors[error])) {\n          if (fieldForm.errors[error].errorPath) {\n            return undefined;\n          }\n          if (fieldForm.errors[error].message) {\n            message = fieldForm.errors[error].message;\n          }\n        }\n        if (this.field.validation?.messages?.[error]) {\n          message = this.field.validation.messages[error];\n        }\n        if (this.field.validators?.[error]?.message) {\n          message = this.field.validators[error].message;\n        }\n        if (this.field.asyncValidators?.[error]?.message) {\n          message = this.field.asyncValidators[error].message;\n        }\n        if (typeof message === 'function') {\n          return message(fieldForm.errors[error], this.field);\n        }\n        return message;\n      }\n    }\n    return undefined;\n  }\n}\nFormlyValidationMessage.ɵfac = function FormlyValidationMessage_Factory(t) {\n  return new (t || FormlyValidationMessage)(i0.ɵɵdirectiveInject(FormlyConfig));\n};\nFormlyValidationMessage.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: FormlyValidationMessage,\n  selectors: [[\"formly-validation-message\"]],\n  inputs: {\n    field: \"field\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 2,\n  vars: 3,\n  template: function FormlyValidationMessage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtext(0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n    if (rf & 2) {\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(1, 1, ctx.errorMessage$));\n    }\n  },\n  dependencies: [i2$1.AsyncPipe],\n  encapsulation: 2,\n  changeDetection: 0\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FormlyValidationMessage, [{\n    type: Component,\n    args: [{\n      selector: 'formly-validation-message',\n      template: '{{ errorMessage$ | async }}',\n      changeDetection: ChangeDetectionStrategy.OnPush\n    }]\n  }], function () {\n    return [{\n      type: FormlyConfig\n    }];\n  }, {\n    field: [{\n      type: Input\n    }]\n  });\n})();\nclass FieldArrayType extends FieldType {\n  onPopulate(field) {\n    if (hasKey(field)) {\n      const control = findControl(field);\n      registerControl(field, control ? control : new FormArray([], {\n        updateOn: field.modelOptions.updateOn\n      }));\n    }\n    field.fieldGroup = field.fieldGroup || [];\n    const length = Array.isArray(field.model) ? field.model.length : 0;\n    if (field.fieldGroup.length > length) {\n      for (let i = field.fieldGroup.length - 1; i >= length; --i) {\n        unregisterControl(field.fieldGroup[i], true);\n        field.fieldGroup.splice(i, 1);\n      }\n    }\n    for (let i = field.fieldGroup.length; i < length; i++) {\n      const f = {\n        ...clone(typeof field.fieldArray === 'function' ? field.fieldArray(field) : field.fieldArray),\n        key: `${i}`\n      };\n      field.fieldGroup.push(f);\n    }\n  }\n  add(i, initialModel, {\n    markAsDirty\n  } = {\n    markAsDirty: true\n  }) {\n    i = i == null ? this.field.fieldGroup.length : i;\n    if (!this.model) {\n      assignFieldValue(this.field, []);\n    }\n    this.model.splice(i, 0, initialModel ? clone(initialModel) : undefined);\n    this._build();\n    markAsDirty && this.formControl.markAsDirty();\n  }\n  remove(i, {\n    markAsDirty\n  } = {\n    markAsDirty: true\n  }) {\n    this.model.splice(i, 1);\n    const field = this.field.fieldGroup[i];\n    this.field.fieldGroup.splice(i, 1);\n    this.field.fieldGroup.forEach((f, key) => f.key = `${key}`);\n    unregisterControl(field, true);\n    this._build();\n    markAsDirty && this.formControl.markAsDirty();\n  }\n  _build() {\n    const fields = this.field.formControl._fields ?? [this.field];\n    fields.forEach(f => this.options.build(f));\n    this.options.fieldChanges.next({\n      field: this.field,\n      value: getFieldValue(this.field),\n      type: 'valueChanges'\n    });\n  }\n}\nFieldArrayType.ɵfac = /* @__PURE__ */function () {\n  let ɵFieldArrayType_BaseFactory;\n  return function FieldArrayType_Factory(t) {\n    return (ɵFieldArrayType_BaseFactory || (ɵFieldArrayType_BaseFactory = i0.ɵɵgetInheritedFactory(FieldArrayType)))(t || FieldArrayType);\n  };\n}();\nFieldArrayType.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: FieldArrayType,\n  features: [i0.ɵɵInheritDefinitionFeature]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FieldArrayType, [{\n    type: Directive\n  }], null, null);\n})();\nclass FieldWrapper extends FieldType {\n  set _staticContent(content) {\n    this.fieldComponent = content;\n  }\n}\nFieldWrapper.ɵfac = /* @__PURE__ */function () {\n  let ɵFieldWrapper_BaseFactory;\n  return function FieldWrapper_Factory(t) {\n    return (ɵFieldWrapper_BaseFactory || (ɵFieldWrapper_BaseFactory = i0.ɵɵgetInheritedFactory(FieldWrapper)))(t || FieldWrapper);\n  };\n}();\nFieldWrapper.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: FieldWrapper,\n  viewQuery: function FieldWrapper_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c2, 5, ViewContainerRef);\n      i0.ɵɵviewQuery(_c2, 7, ViewContainerRef);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.fieldComponent = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._staticContent = _t.first);\n    }\n  },\n  features: [i0.ɵɵInheritDefinitionFeature]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FieldWrapper, [{\n    type: Directive\n  }], null, {\n    fieldComponent: [{\n      type: ViewChild,\n      args: ['fieldComponent', {\n        read: ViewContainerRef\n      }]\n    }],\n    _staticContent: [{\n      type: ViewChild,\n      args: ['fieldComponent', {\n        read: ViewContainerRef,\n        static: true\n      }]\n    }]\n  });\n})();\n\n/** @ignore */\nclass FormlyTemplateType extends FieldType {\n  constructor(sanitizer) {\n    super();\n    this.sanitizer = sanitizer;\n    this.innerHtml = {};\n  }\n  get template() {\n    if (this.field && this.field.template !== this.innerHtml.template) {\n      this.innerHtml = {\n        template: this.field.template,\n        content: this.props.safeHtml ? this.sanitizer.bypassSecurityTrustHtml(this.field.template) : this.field.template\n      };\n    }\n    return this.innerHtml.content;\n  }\n}\nFormlyTemplateType.ɵfac = function FormlyTemplateType_Factory(t) {\n  return new (t || FormlyTemplateType)(i0.ɵɵdirectiveInject(i1.DomSanitizer));\n};\nFormlyTemplateType.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: FormlyTemplateType,\n  selectors: [[\"formly-template\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 1,\n  vars: 1,\n  consts: [[3, \"innerHtml\"]],\n  template: function FormlyTemplateType_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"innerHtml\", ctx.template, i0.ɵɵsanitizeHtml);\n    }\n  },\n  encapsulation: 2,\n  changeDetection: 0\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FormlyTemplateType, [{\n    type: Component,\n    args: [{\n      selector: 'formly-template',\n      template: `<div [innerHtml]=\"template\"></div>`,\n      changeDetection: ChangeDetectionStrategy.OnPush\n    }]\n  }], function () {\n    return [{\n      type: i1.DomSanitizer\n    }];\n  }, null);\n})();\nfunction evalStringExpression(expression, argNames) {\n  try {\n    return Function(...argNames, `return ${expression};`);\n  } catch (error) {\n    console.error(error);\n  }\n}\nfunction evalExpression(expression, thisArg, argVal) {\n  if (typeof expression === 'function') {\n    return expression.apply(thisArg, argVal);\n  } else {\n    return expression ? true : false;\n  }\n}\nclass FieldExpressionExtension {\n  onPopulate(field) {\n    if (field._expressions) {\n      return;\n    }\n    // cache built expression\n    defineHiddenProp(field, '_expressions', {});\n    observe(field, ['hide'], ({\n      currentValue,\n      firstChange\n    }) => {\n      defineHiddenProp(field, '_hide', !!currentValue);\n      if (!firstChange || firstChange && currentValue === true) {\n        field.props.hidden = currentValue;\n        field.options._hiddenFieldsForCheck.push(field);\n      }\n    });\n    if (field.hideExpression) {\n      observe(field, ['hideExpression'], ({\n        currentValue: expr\n      }) => {\n        field._expressions.hide = this.parseExpressions(field, 'hide', typeof expr === 'boolean' ? () => expr : expr);\n      });\n    }\n    const evalExpr = (key, expr) => {\n      if (typeof expr === 'string' || isFunction(expr)) {\n        field._expressions[key] = this.parseExpressions(field, key, expr);\n      } else if (expr instanceof Observable) {\n        field._expressions[key] = {\n          value$: expr.pipe(tap(v => {\n            this.evalExpr(field, key, v);\n            field.options.detectChanges(field);\n          }))\n        };\n      }\n    };\n    field.expressions = field.expressions || {};\n    for (const key of Object.keys(field.expressions)) {\n      observe(field, ['expressions', key], ({\n        currentValue: expr\n      }) => {\n        evalExpr(key, isFunction(expr) ? (...args) => expr(field, args[3]) : expr);\n      });\n    }\n    field.expressionProperties = field.expressionProperties || {};\n    for (const key of Object.keys(field.expressionProperties)) {\n      observe(field, ['expressionProperties', key], ({\n        currentValue\n      }) => evalExpr(key, currentValue));\n    }\n  }\n  postPopulate(field) {\n    if (field.parent) {\n      return;\n    }\n    if (!field.options.checkExpressions) {\n      let checkLocked = false;\n      field.options.checkExpressions = (f, ignoreCache) => {\n        if (checkLocked) {\n          return;\n        }\n        checkLocked = true;\n        const fieldChanged = this.checkExpressions(f, ignoreCache);\n        const options = field.options;\n        options._hiddenFieldsForCheck.sort(f => f.hide ? -1 : 1).forEach(f => this.changeHideState(f, f.hide, !ignoreCache));\n        options._hiddenFieldsForCheck = [];\n        if (fieldChanged) {\n          this.checkExpressions(field);\n          if (field.options && field.options.detectChanges) {\n            field.options.detectChanges(field);\n          }\n        }\n        checkLocked = false;\n      };\n      field.options._checkField = (f, ignoreCache) => {\n        console.warn(`Formly: 'options._checkField' is deprecated since v6.0, use 'options.checkExpressions' instead.`);\n        field.options.checkExpressions(f, ignoreCache);\n      };\n    }\n  }\n  parseExpressions(field, path, expr) {\n    let parentExpression;\n    if (field.parent && ['hide', 'props.disabled'].includes(path)) {\n      const rootValue = f => {\n        return path === 'hide' ? f.hide : f.props.disabled;\n      };\n      parentExpression = () => {\n        let root = field.parent;\n        while (root.parent && !rootValue(root)) {\n          root = root.parent;\n        }\n        return rootValue(root);\n      };\n    }\n    expr = expr || (() => false);\n    if (typeof expr === 'string') {\n      expr = evalStringExpression(expr, ['model', 'formState', 'field']);\n    }\n    let currentValue;\n    return {\n      callback: ignoreCache => {\n        try {\n          const exprValue = evalExpression(parentExpression ? (...args) => parentExpression(field) || expr(...args) : expr, {\n            field\n          }, [field.model, field.options.formState, field, ignoreCache]);\n          if (ignoreCache || currentValue !== exprValue && (!isObject(exprValue) || isObservable(exprValue) || JSON.stringify(exprValue) !== JSON.stringify(currentValue))) {\n            currentValue = exprValue;\n            this.evalExpr(field, path, exprValue);\n            return true;\n          }\n          return false;\n        } catch (error) {\n          error.message = `[Formly Error] [Expression \"${path}\"] ${error.message}`;\n          throw error;\n        }\n      }\n    };\n  }\n  checkExpressions(field, ignoreCache = false) {\n    if (!field) {\n      return false;\n    }\n    let fieldChanged = false;\n    if (field._expressions) {\n      for (const key of Object.keys(field._expressions)) {\n        field._expressions[key].callback?.(ignoreCache) && (fieldChanged = true);\n      }\n    }\n    field.fieldGroup?.forEach(f => this.checkExpressions(f, ignoreCache) && (fieldChanged = true));\n    return fieldChanged;\n  }\n  changeDisabledState(field, value) {\n    if (field.fieldGroup) {\n      field.fieldGroup.filter(f => !f._expressions.hasOwnProperty('props.disabled')).forEach(f => this.changeDisabledState(f, value));\n    }\n    if (hasKey(field) && field.props.disabled !== value) {\n      field.props.disabled = value;\n    }\n  }\n  changeHideState(field, hide, resetOnHide) {\n    if (field.fieldGroup) {\n      field.fieldGroup.filter(f => !f._expressions.hide).forEach(f => this.changeHideState(f, hide, resetOnHide));\n    }\n    if (field.formControl && hasKey(field)) {\n      defineHiddenProp(field, '_hide', !!(hide || field.hide));\n      const c = field.formControl;\n      if (c._fields?.length > 1) {\n        updateValidity(c);\n      }\n      if (hide === true && (!c._fields || c._fields.every(f => !!f._hide))) {\n        unregisterControl(field, true);\n        if (resetOnHide && field.resetOnHide) {\n          assignFieldValue(field, undefined);\n          field.formControl.reset({\n            value: undefined,\n            disabled: field.formControl.disabled\n          });\n          field.options.fieldChanges.next({\n            value: undefined,\n            field,\n            type: 'valueChanges'\n          });\n          if (field.fieldGroup && field.formControl instanceof FormArray) {\n            field.fieldGroup.length = 0;\n          }\n        }\n      } else if (hide === false) {\n        if (field.resetOnHide && !isUndefined(field.defaultValue) && isUndefined(getFieldValue(field))) {\n          assignFieldValue(field, field.defaultValue);\n        }\n        registerControl(field, undefined, true);\n        if (field.resetOnHide && field.fieldArray && field.fieldGroup?.length !== field.model?.length) {\n          field.options.build(field);\n        }\n      }\n    }\n    if (field.options.fieldChanges) {\n      field.options.fieldChanges.next({\n        field,\n        type: 'hidden',\n        value: hide\n      });\n    }\n  }\n  evalExpr(field, prop, value) {\n    if (prop.indexOf('model.') === 0) {\n      const key = prop.replace(/^model\\./, ''),\n        parent = field.fieldGroup ? field : field.parent;\n      let control = field?.key === key ? field.formControl : field.form.get(key);\n      if (!control && field.get(key)) {\n        control = field.get(key).formControl;\n      }\n      assignFieldValue({\n        key,\n        parent,\n        model: field.model\n      }, value);\n      if (control && !(isNil(control.value) && isNil(value)) && control.value !== value) {\n        control.patchValue(value);\n      }\n    } else {\n      try {\n        let target = field;\n        const paths = this._evalExpressionPath(field, prop);\n        const lastIndex = paths.length - 1;\n        for (let i = 0; i < lastIndex; i++) {\n          target = target[paths[i]];\n        }\n        target[paths[lastIndex]] = value;\n      } catch (error) {\n        error.message = `[Formly Error] [Expression \"${prop}\"] ${error.message}`;\n        throw error;\n      }\n      if (['templateOptions.disabled', 'props.disabled'].includes(prop) && hasKey(field)) {\n        this.changeDisabledState(field, value);\n      }\n    }\n    this.emitExpressionChanges(field, prop, value);\n  }\n  emitExpressionChanges(field, property, value) {\n    if (!field.options.fieldChanges) {\n      return;\n    }\n    field.options.fieldChanges.next({\n      field,\n      type: 'expressionChanges',\n      property,\n      value\n    });\n  }\n  _evalExpressionPath(field, prop) {\n    if (field._expressions[prop] && field._expressions[prop].paths) {\n      return field._expressions[prop].paths;\n    }\n    let paths = [];\n    if (prop.indexOf('[') === -1) {\n      paths = prop.split('.');\n    } else {\n      prop.split(/[[\\]]{1,2}/) // https://stackoverflow.com/a/20198206\n      .filter(p => p).forEach(path => {\n        const arrayPath = path.match(/['|\"](.*?)['|\"]/);\n        if (arrayPath) {\n          paths.push(arrayPath[1]);\n        } else {\n          paths.push(...path.split('.').filter(p => p));\n        }\n      });\n    }\n    if (field._expressions[prop]) {\n      field._expressions[prop].paths = paths;\n    }\n    return paths;\n  }\n}\nclass FieldValidationExtension {\n  constructor(config) {\n    this.config = config;\n  }\n  onPopulate(field) {\n    this.initFieldValidation(field, 'validators');\n    this.initFieldValidation(field, 'asyncValidators');\n  }\n  initFieldValidation(field, type) {\n    const validators = [];\n    if (type === 'validators' && !(field.hasOwnProperty('fieldGroup') && !hasKey(field))) {\n      validators.push(this.getPredefinedFieldValidation(field));\n    }\n    if (field[type]) {\n      for (const validatorName of Object.keys(field[type])) {\n        validatorName === 'validation' ? validators.push(...field[type].validation.map(v => this.wrapNgValidatorFn(field, v))) : validators.push(this.wrapNgValidatorFn(field, field[type][validatorName], validatorName));\n      }\n    }\n    defineHiddenProp(field, '_' + type, validators);\n  }\n  getPredefinedFieldValidation(field) {\n    let VALIDATORS = [];\n    FORMLY_VALIDATORS.forEach(opt => observe(field, ['props', opt], ({\n      currentValue,\n      firstChange\n    }) => {\n      VALIDATORS = VALIDATORS.filter(o => o !== opt);\n      if (currentValue != null && currentValue !== false) {\n        VALIDATORS.push(opt);\n      }\n      if (!firstChange && field.formControl) {\n        updateValidity(field.formControl);\n      }\n    }));\n    return control => {\n      if (VALIDATORS.length === 0) {\n        return null;\n      }\n      return Validators.compose(VALIDATORS.map(opt => () => {\n        const value = field.props[opt];\n        switch (opt) {\n          case 'required':\n            return Validators.required(control);\n          case 'pattern':\n            return Validators.pattern(value)(control);\n          case 'minLength':\n            const minLengthResult = Validators.minLength(value)(control);\n            const minLengthKey = this.config.getValidatorMessage('minlength') || field.validation?.messages?.minlength ? 'minlength' : 'minLength';\n            return minLengthResult ? {\n              [minLengthKey]: minLengthResult.minlength\n            } : null;\n          case 'maxLength':\n            const maxLengthResult = Validators.maxLength(value)(control);\n            const maxLengthKey = this.config.getValidatorMessage('maxlength') || field.validation?.messages?.maxlength ? 'maxlength' : 'maxLength';\n            return maxLengthResult ? {\n              [maxLengthKey]: maxLengthResult.maxlength\n            } : null;\n          case 'min':\n            return Validators.min(value)(control);\n          case 'max':\n            return Validators.max(value)(control);\n          default:\n            return null;\n        }\n      }))(control);\n    };\n  }\n  wrapNgValidatorFn(field, validator, validatorName) {\n    let validatorOption;\n    if (typeof validator === 'string') {\n      validatorOption = clone(this.config.getValidator(validator));\n    }\n    if (typeof validator === 'object' && validator.name) {\n      validatorOption = clone(this.config.getValidator(validator.name));\n      if (validator.options) {\n        validatorOption.options = validator.options;\n      }\n    }\n    if (typeof validator === 'object' && validator.expression) {\n      const {\n        expression,\n        ...options\n      } = validator;\n      validatorOption = {\n        name: validatorName,\n        validation: expression,\n        options: Object.keys(options).length > 0 ? options : null\n      };\n    }\n    if (typeof validator === 'function') {\n      validatorOption = {\n        name: validatorName,\n        validation: validator\n      };\n    }\n    return control => {\n      const errors = validatorOption.validation(control, field, validatorOption.options);\n      if (isPromise(errors)) {\n        return errors.then(v => this.handleAsyncResult(field, validatorName ? !!v : v, validatorOption));\n      }\n      if (isObservable(errors)) {\n        return errors.pipe(map(v => this.handleAsyncResult(field, validatorName ? !!v : v, validatorOption)));\n      }\n      return this.handleResult(field, validatorName ? !!errors : errors, validatorOption);\n    };\n  }\n  handleAsyncResult(field, errors, options) {\n    // workaround for https://github.com/angular/angular/issues/13200\n    field.options.detectChanges(field);\n    return this.handleResult(field, errors, options);\n  }\n  handleResult(field, errors, {\n    name,\n    options\n  }) {\n    if (typeof errors === 'boolean') {\n      errors = errors ? null : {\n        [name]: options ? options : true\n      };\n    }\n    const ctrl = field.formControl;\n    ctrl?._childrenErrors?.[name]?.();\n    if (isObject(errors)) {\n      Object.keys(errors).forEach(name => {\n        const errorPath = errors[name].errorPath ? errors[name].errorPath : options?.errorPath;\n        const childCtrl = errorPath ? field.formControl.get(errorPath) : null;\n        if (childCtrl) {\n          const {\n            errorPath: _errorPath,\n            ...opts\n          } = errors[name];\n          childCtrl.setErrors({\n            ...(childCtrl.errors || {}),\n            [name]: opts\n          });\n          !ctrl._childrenErrors && defineHiddenProp(ctrl, '_childrenErrors', {});\n          ctrl._childrenErrors[name] = () => {\n            const {\n              [name]: _toDelete,\n              ...childErrors\n            } = childCtrl.errors || {};\n            childCtrl.setErrors(Object.keys(childErrors).length === 0 ? null : childErrors);\n          };\n        }\n      });\n    }\n    return errors;\n  }\n}\nclass FieldFormExtension {\n  prePopulate(field) {\n    if (!this.root) {\n      this.root = field;\n    }\n    if (field.parent) {\n      Object.defineProperty(field, 'form', {\n        get: () => field.parent.formControl,\n        configurable: true\n      });\n    }\n  }\n  onPopulate(field) {\n    if (field.hasOwnProperty('fieldGroup') && !hasKey(field)) {\n      defineHiddenProp(field, 'formControl', field.form);\n    } else {\n      this.addFormControl(field);\n    }\n  }\n  postPopulate(field) {\n    if (this.root !== field) {\n      return;\n    }\n    this.root = null;\n    const markForCheck = this.setValidators(field);\n    if (markForCheck && field.parent) {\n      let parent = field.parent;\n      while (parent) {\n        if (hasKey(parent) || !parent.parent) {\n          updateValidity(parent.formControl, true);\n        }\n        parent = parent.parent;\n      }\n    }\n  }\n  addFormControl(field) {\n    let control = findControl(field);\n    if (field.fieldArray) {\n      return;\n    }\n    if (!control) {\n      const controlOptions = {\n        updateOn: field.modelOptions.updateOn\n      };\n      if (field.fieldGroup) {\n        control = new FormGroup({}, controlOptions);\n      } else {\n        const value = hasKey(field) ? getFieldValue(field) : field.defaultValue;\n        control = new FormControl({\n          value,\n          disabled: !!field.props.disabled\n        }, {\n          ...controlOptions,\n          initialValueIsDefault: true\n        });\n      }\n    }\n    registerControl(field, control);\n  }\n  setValidators(field, disabled = false) {\n    if (disabled === false && hasKey(field) && field.props?.disabled) {\n      disabled = true;\n    }\n    let markForCheck = false;\n    field.fieldGroup?.forEach(f => f && this.setValidators(f, disabled) && (markForCheck = true));\n    if (hasKey(field) || !field.parent || !hasKey(field) && !field.fieldGroup) {\n      const {\n        formControl: c\n      } = field;\n      if (c) {\n        if (hasKey(field) && c instanceof FormControl) {\n          if (disabled && c.enabled) {\n            c.disable({\n              emitEvent: false,\n              onlySelf: true\n            });\n            markForCheck = true;\n          }\n          if (!disabled && c.disabled) {\n            c.enable({\n              emitEvent: false,\n              onlySelf: true\n            });\n            markForCheck = true;\n          }\n        }\n        if (null === c.validator || null === c.asyncValidator) {\n          c.setValidators(() => {\n            const v = Validators.compose(this.mergeValidators(field, '_validators'));\n            return v ? v(c) : null;\n          });\n          c.setAsyncValidators(() => {\n            const v = Validators.composeAsync(this.mergeValidators(field, '_asyncValidators'));\n            return v ? v(c) : of(null);\n          });\n          markForCheck = true;\n        }\n        if (markForCheck) {\n          updateValidity(c, true);\n          // update validity of `FormGroup` instance created by field with nested key.\n          let parent = c.parent;\n          for (let i = 1; i < getKeyPath(field).length; i++) {\n            if (parent) {\n              updateValidity(parent, true);\n              parent = parent.parent;\n            }\n          }\n        }\n      }\n    }\n    return markForCheck;\n  }\n  mergeValidators(field, type) {\n    const validators = [];\n    const c = field.formControl;\n    if (c?._fields?.length > 1) {\n      c._fields.filter(f => !f._hide).forEach(f => validators.push(...f[type]));\n    } else if (field[type]) {\n      validators.push(...field[type]);\n    }\n    if (field.fieldGroup) {\n      field.fieldGroup.filter(f => f?.fieldGroup && !hasKey(f)).forEach(f => validators.push(...this.mergeValidators(f, type)));\n    }\n    return validators;\n  }\n}\nclass CoreExtension {\n  constructor(config) {\n    this.config = config;\n    this.formId = 0;\n  }\n  prePopulate(field) {\n    const root = field.parent;\n    this.initRootOptions(field);\n    this.initFieldProps(field);\n    if (root) {\n      Object.defineProperty(field, 'options', {\n        get: () => root.options,\n        configurable: true\n      });\n      Object.defineProperty(field, 'model', {\n        get: () => hasKey(field) && field.fieldGroup ? getFieldValue(field) : root.model,\n        configurable: true\n      });\n    }\n    Object.defineProperty(field, 'get', {\n      value: key => getField(field, key),\n      configurable: true\n    });\n    this.getFieldComponentInstance(field).prePopulate?.(field);\n  }\n  onPopulate(field) {\n    this.initFieldOptions(field);\n    this.getFieldComponentInstance(field).onPopulate?.(field);\n    if (field.fieldGroup) {\n      field.fieldGroup.forEach((f, index) => {\n        if (f) {\n          Object.defineProperty(f, 'parent', {\n            get: () => field,\n            configurable: true\n          });\n          Object.defineProperty(f, 'index', {\n            get: () => index,\n            configurable: true\n          });\n        }\n        this.formId++;\n      });\n    }\n  }\n  postPopulate(field) {\n    this.getFieldComponentInstance(field).postPopulate?.(field);\n  }\n  initFieldProps(field) {\n    field.props ?? (field.props = field.templateOptions);\n    Object.defineProperty(field, 'templateOptions', {\n      get: () => field.props,\n      set: props => field.props = props,\n      configurable: true\n    });\n  }\n  initRootOptions(field) {\n    if (field.parent) {\n      return;\n    }\n    const options = field.options;\n    field.options.formState = field.options.formState || {};\n    if (!options.showError) {\n      options.showError = this.config.extras.showError;\n    }\n    if (!options.fieldChanges) {\n      defineHiddenProp(options, 'fieldChanges', new Subject());\n    }\n    if (!options._hiddenFieldsForCheck) {\n      options._hiddenFieldsForCheck = [];\n    }\n    options._markForCheck = f => {\n      console.warn(`Formly: 'options._markForCheck' is deprecated since v6.0, use 'options.detectChanges' instead.`);\n      options.detectChanges(f);\n    };\n    options.detectChanges = f => {\n      if (f._componentRefs) {\n        f.options.checkExpressions(f);\n        markFieldForCheck(f);\n      }\n      f.fieldGroup?.forEach(f => f && options.detectChanges(f));\n    };\n    options.resetModel = model => {\n      model = clone(model ?? options._initialModel);\n      if (field.model) {\n        Object.keys(field.model).forEach(k => delete field.model[k]);\n        Object.assign(field.model, model || {});\n      }\n      options.build(field);\n      field.form.reset(field.model);\n      if (options.parentForm && options.parentForm.control === field.formControl) {\n        options.parentForm.submitted = false;\n      }\n    };\n    options.updateInitialValue = model => options._initialModel = clone(model ?? field.model);\n    field.options.updateInitialValue();\n  }\n  initFieldOptions(field) {\n    reverseDeepMerge(field, {\n      id: getFieldId(`formly_${this.formId}`, field, field.index),\n      hooks: {},\n      modelOptions: {},\n      validation: {\n        messages: {}\n      },\n      props: !field.type || !hasKey(field) ? {} : {\n        label: '',\n        placeholder: '',\n        disabled: false\n      }\n    });\n    if (this.config.extras.resetFieldOnHide && field.resetOnHide !== false) {\n      field.resetOnHide = true;\n    }\n    if (field.type !== 'formly-template' && (field.template || field.expressions?.template || field.expressionProperties?.template)) {\n      field.type = 'formly-template';\n    }\n    if (!field.type && field.fieldGroup) {\n      field.type = 'formly-group';\n    }\n    if (field.type) {\n      this.config.getMergedField(field);\n    }\n    if (hasKey(field) && !isUndefined(field.defaultValue) && isUndefined(getFieldValue(field))) {\n      const isHidden = f => f.hide || f.expressions?.hide || f.hideExpression;\n      let setDefaultValue = !field.resetOnHide || !isHidden(field);\n      if (!isHidden(field) && field.resetOnHide) {\n        let parent = field.parent;\n        while (parent && !isHidden(parent)) {\n          parent = parent.parent;\n        }\n        setDefaultValue = !parent || !isHidden(parent);\n      }\n      if (setDefaultValue) {\n        assignFieldValue(field, field.defaultValue);\n      }\n    }\n    field.wrappers = field.wrappers || [];\n  }\n  getFieldComponentInstance(field) {\n    const componentRefInstance = () => {\n      let componentRef = this.config.resolveFieldTypeRef(field);\n      const fieldComponentRef = field._componentRefs?.slice(-1)[0];\n      if (fieldComponentRef instanceof ComponentRef && fieldComponentRef?.componentType === componentRef?.componentType) {\n        componentRef = fieldComponentRef;\n      }\n      return componentRef?.instance;\n    };\n    if (!field._proxyInstance) {\n      defineHiddenProp(field, '_proxyInstance', new Proxy({}, {\n        get: (_, prop) => componentRefInstance()?.[prop],\n        set: (_, prop, value) => componentRefInstance()[prop] = value\n      }));\n    }\n    return field._proxyInstance;\n  }\n}\nfunction defaultFormlyConfig(config) {\n  return {\n    types: [{\n      name: 'formly-group',\n      component: FormlyGroup\n    }, {\n      name: 'formly-template',\n      component: FormlyTemplateType\n    }],\n    extensions: [{\n      name: 'core',\n      extension: new CoreExtension(config),\n      priority: -250\n    }, {\n      name: 'field-validation',\n      extension: new FieldValidationExtension(config),\n      priority: -200\n    }, {\n      name: 'field-form',\n      extension: new FieldFormExtension(),\n      priority: -150\n    }, {\n      name: 'field-expression',\n      extension: new FieldExpressionExtension(),\n      priority: -100\n    }]\n  };\n}\nclass FormlyModule {\n  constructor(configService, configs = []) {\n    if (!configs) {\n      return;\n    }\n    configs.forEach(config => configService.addConfig(config));\n  }\n  static forRoot(config = {}) {\n    return {\n      ngModule: FormlyModule,\n      providers: [{\n        provide: FORMLY_CONFIG,\n        multi: true,\n        useFactory: defaultFormlyConfig,\n        deps: [FormlyConfig]\n      }, {\n        provide: FORMLY_CONFIG,\n        useValue: config,\n        multi: true\n      }, FormlyConfig, FormlyFormBuilder]\n    };\n  }\n  static forChild(config = {}) {\n    return {\n      ngModule: FormlyModule,\n      providers: [{\n        provide: FORMLY_CONFIG,\n        multi: true,\n        useFactory: defaultFormlyConfig,\n        deps: [FormlyConfig]\n      }, {\n        provide: FORMLY_CONFIG,\n        useValue: config,\n        multi: true\n      }, FormlyFormBuilder]\n    };\n  }\n}\nFormlyModule.ɵfac = function FormlyModule_Factory(t) {\n  return new (t || FormlyModule)(i0.ɵɵinject(FormlyConfig), i0.ɵɵinject(FORMLY_CONFIG, 8));\n};\nFormlyModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: FormlyModule\n});\nFormlyModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[CommonModule]]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FormlyModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [FormlyTemplate, FormlyForm, FormlyField, FormlyAttributes, FormlyGroup, FormlyValidationMessage, FormlyTemplateType],\n      exports: [FormlyTemplate, FormlyForm, FormlyField, FormlyAttributes, FormlyGroup, FormlyValidationMessage],\n      imports: [CommonModule]\n    }]\n  }], function () {\n    return [{\n      type: FormlyConfig\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [FORMLY_CONFIG]\n      }]\n    }];\n  }, null);\n})();\n\n/*\n * Public API Surface of core\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { FORMLY_CONFIG, FieldArrayType, FieldType, FieldWrapper, FormlyConfig, FormlyField, FormlyForm, FormlyFormBuilder, FormlyModule, FormlyAttributes as ɵFormlyAttributes, FormlyGroup as ɵFormlyGroup, FormlyTemplate as ɵFormlyTemplate, FormlyValidationMessage as ɵFormlyValidationMessage, clone as ɵclone, defineHiddenProp as ɵdefineHiddenProp, getFieldValue as ɵgetFieldValue, hasKey as ɵhasKey, observe as ɵobserve, reverseDeepMerge as ɵreverseDeepMerge };","map":{"version":3,"names":["i0","Type","TemplateRef","ComponentRef","ChangeDetectorRef","InjectionToken","Injectable","Optional","Directive","Input","ViewContainerRef","Component","ViewChild","EventEmitter","ChangeDetectionStrategy","Output","ContentChildren","Inject","ViewChildren","NgModule","i2","AbstractControl","FormGroup","FormArray","FormControl","NgControl","Validators","isObservable","merge","of","Observable","Subject","distinctUntilChanged","startWith","debounceTime","filter","switchMap","take","tap","map","i2$1","DOCUMENT","CommonModule","i1","disableTreeValidityCall","form","callback","_updateTreeValidity","bind","getFieldId","formId","field","index","id","type","template","prototype","constructor","name","key","join","hasKey","isNil","getKeyPath","_keyPath","path","indexOf","replace","split","Array","isArray","slice","defineHiddenProp","FORMLY_VALIDATORS","assignFieldValue","value","paths","length","root","parent","undefined","resetOnHide","k","pop","m","reduce","model","assignModelValue","i","isObject","test","clone","getFieldValue","reverseDeepMerge","dest","args","forEach","src","srcArg","isBlankString","objAndSameType","isUndefined","isFunction","obj1","obj2","Object","getPrototypeOf","x","isPromise","obj","then","changingThisBreaksApplicationSecurity","Set","Map","_isAMomentObject","Date","getTime","v","proto","c","create","setPrototypeOf","keys","newVal","prop","propDesc","getOwnPropertyDescriptor","get","defineProperty","defaultValue","enumerable","writable","configurable","observeDeep","source","setFn","observers","unsubscribe","observer","observe","firstChange","currentValue","push","o","_observers","target","onChange","state","set","previousValue","changeFn","setValue","getField","f","fieldGroup","len","markFieldForCheck","_componentRefs","ref","changeDetectorRef","injector","markForCheck","FORMLY_CONFIG","FormlyConfig","types","validators","wrappers","messages","extras","checkExpressionOn","lazyRender","resetFieldOnHide","renderFormlyFieldElement","showError","formControl","invalid","touched","options","parentForm","submitted","validation","show","extensions","presets","extensionsByPriority","addConfig","config","setType","validator","setValidator","wrapper","setWrapper","validationMessages","addValidatorMessage","message","setSortedExtensions","acc","curr","option","hasOwnProperty","getType","throwIfNotFound","component","Error","mergeExtendedType","getMergedField","defaultOptions","extendDefaults","extends","optionsTypes","componentRef","resolveFieldTypeRef","instance","_componentRef","_viewContainerRef","_injector","createComponent","destroy","e","console","error","setTypeWrapper","getWrapper","getValidator","ngDevMode","deprecated","minlength","maxlength","warn","getValidatorMessage","extensionOptions","extensionOption","priority","extension","Number","sort","a","b","prio","extendedType","ɵfac","ɵprov","providedIn","FormlyFormBuilder","viewContainerRef","buildForm","build","core","_setOptions","_build","checkExpressions","detectChanges","values","prePopulate","onPopulate","postPopulate","_buildForm","Injector","FormGroupDirective","decorators","unregisterControl","emitEvent","control","fieldIndex","_fields","splice","opts","controls","findIndex","removeAt","removeControl","setParent","findControl","shareFormControl","registerControl","setValidators","setAsyncValidators","props","disabled","disabledObserver","disable","enable","registerOnDisabledChange","patchValue","setControl","_hide","updateValidity","onlySelf","status","updateValueAndValidity","statusChanges","emit","valueChanges","clearControl","FormlyTemplate","ngOnChanges","ɵdir","selector","FormlyFieldTemplates","FormlyField","renderer","_elementRef","hostContainerRef","hostObservers","componentRefs","hooksObservers","detectFieldBuild","valueChangesUnsubscribe","containerRef","elementRef","location","ngAfterContentInit","triggerHook","ngAfterViewInit","ngDoCheck","render","ngOnInit","changes","ngOnDestroy","resetRefs","hostObserver","renderField","clear","wps","attachComponentRef","_lContainer","viewRef","detach","destroyed","insert","inlineType","templates","find","createEmbeddedView","$implicit","fieldChanges","hooks","r","sub","subscribe","assign","setStyle","nativeElement","className","removeAttribute","setAttribute","hide","_localFields","subscribes","_expressions","expressionObserver","subscription","value$","fieldObserver","pipe","y","updateOn","debounce","modelOptions","default","parsers","parserFn","next","templateFieldsSubs","Renderer2","ElementRef","ɵcmp","styles","read","static","FormlyForm","builder","ngZone","fieldTemplates","modelChange","_modelChangeValue","immutable","setField","fields","checkExpressionChange","onStable","asObservable","runGuarded","p","NgZone","providers","changeDetection","OnPush","FormlyAttributes","_document","uiAttributesCache","uiEvents","listeners","events","eventName","$event","onFocus","onBlur","document","fieldAttrElements","listener","listen","attributes","attr","detachElementRef","attachElementRef","focusObserver","toggleFocus","uiAttributes","element","hasAttribute","toLowerCase","focus","isFocused","activeElement","some","contains","Promise","resolve","blur","onHostChange","Event","change","markAsDirty","host","FieldType","flat","to","formState","FormlyGroup","NgForOf","FormlyValidationMessage","EXPR_VALIDATORS","errorMessage$","property","errorMessage","fieldForm","errors","errorPath","asyncValidators","AsyncPipe","FieldArrayType","fieldArray","add","initialModel","remove","FieldWrapper","_staticContent","content","fieldComponent","FormlyTemplateType","sanitizer","innerHtml","safeHtml","bypassSecurityTrustHtml","DomSanitizer","evalStringExpression","expression","argNames","Function","evalExpression","thisArg","argVal","apply","FieldExpressionExtension","hidden","_hiddenFieldsForCheck","hideExpression","expr","parseExpressions","evalExpr","expressions","expressionProperties","checkLocked","ignoreCache","fieldChanged","changeHideState","_checkField","parentExpression","includes","rootValue","exprValue","JSON","stringify","changeDisabledState","every","reset","_evalExpressionPath","lastIndex","emitExpressionChanges","arrayPath","match","FieldValidationExtension","initFieldValidation","getPredefinedFieldValidation","validatorName","wrapNgValidatorFn","VALIDATORS","opt","compose","required","pattern","minLengthResult","minLength","minLengthKey","maxLengthResult","maxLength","maxLengthKey","min","max","validatorOption","handleAsyncResult","handleResult","ctrl","_childrenErrors","childCtrl","_errorPath","setErrors","_toDelete","childErrors","FieldFormExtension","addFormControl","controlOptions","initialValueIsDefault","enabled","asyncValidator","mergeValidators","composeAsync","CoreExtension","initRootOptions","initFieldProps","getFieldComponentInstance","initFieldOptions","templateOptions","_markForCheck","resetModel","_initialModel","updateInitialValue","label","placeholder","isHidden","setDefaultValue","componentRefInstance","fieldComponentRef","componentType","_proxyInstance","Proxy","_","defaultFormlyConfig","FormlyModule","configService","configs","forRoot","ngModule","provide","multi","useFactory","deps","useValue","forChild","ɵmod","ɵinj","declarations","exports","imports","ɵFormlyAttributes","ɵFormlyGroup","ɵFormlyTemplate","ɵFormlyValidationMessage","ɵclone","ɵdefineHiddenProp","ɵgetFieldValue","ɵhasKey","ɵobserve","ɵreverseDeepMerge"],"sources":["C:/Users/tomas/OneDrive/Pulpit/sparwd/Projekt/Projekt/ClientApp/node_modules/@ngx-formly/core/fesm2020/ngx-formly-core.mjs"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Type, TemplateRef, ComponentRef, ChangeDetectorRef, InjectionToken, Injectable, Optional, Directive, Input, ViewContainerRef, Component, ViewChild, EventEmitter, ChangeDetectionStrategy, Output, ContentChildren, Inject, ViewChildren, NgModule } from '@angular/core';\nimport * as i2 from '@angular/forms';\nimport { AbstractControl, FormGroup, FormArray, FormControl, NgControl, Validators } from '@angular/forms';\nimport { isObservable, merge, of, Observable, Subject } from 'rxjs';\nimport { distinctUntilChanged, startWith, debounceTime, filter, switchMap, take, tap, map } from 'rxjs/operators';\nimport * as i2$1 from '@angular/common';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport * as i1 from '@angular/platform-browser';\n\nfunction disableTreeValidityCall(form, callback) {\n    const _updateTreeValidity = form._updateTreeValidity.bind(form);\n    form._updateTreeValidity = () => { };\n    callback();\n    form._updateTreeValidity = _updateTreeValidity;\n}\nfunction getFieldId(formId, field, index) {\n    if (field.id) {\n        return field.id;\n    }\n    let type = field.type;\n    if (!type && field.template) {\n        type = 'template';\n    }\n    if (type instanceof Type) {\n        type = type.prototype.constructor.name;\n    }\n    return [formId, type, field.key, index].join('_');\n}\nfunction hasKey(field) {\n    return !isNil(field.key) && field.key !== '';\n}\nfunction getKeyPath(field) {\n    if (!hasKey(field)) {\n        return [];\n    }\n    /* We store the keyPath in the field for performance reasons. This function will be called frequently. */\n    if (field._keyPath?.key !== field.key) {\n        let path = [];\n        if (typeof field.key === 'string') {\n            const key = field.key.indexOf('[') === -1 ? field.key : field.key.replace(/\\[(\\w+)\\]/g, '.$1');\n            path = key.indexOf('.') !== -1 ? key.split('.') : [key];\n        }\n        else if (Array.isArray(field.key)) {\n            path = field.key.slice(0);\n        }\n        else {\n            path = [`${field.key}`];\n        }\n        defineHiddenProp(field, '_keyPath', { key: field.key, path });\n    }\n    return field._keyPath.path.slice(0);\n}\nconst FORMLY_VALIDATORS = ['required', 'pattern', 'minLength', 'maxLength', 'min', 'max'];\nfunction assignFieldValue(field, value) {\n    let paths = getKeyPath(field);\n    if (paths.length === 0) {\n        return;\n    }\n    let root = field;\n    while (root.parent) {\n        root = root.parent;\n        paths = [...getKeyPath(root), ...paths];\n    }\n    if (value === undefined && field.resetOnHide) {\n        const k = paths.pop();\n        const m = paths.reduce((model, path) => model[path] || {}, root.model);\n        delete m[k];\n        return;\n    }\n    assignModelValue(root.model, paths, value);\n}\nfunction assignModelValue(model, paths, value) {\n    for (let i = 0; i < paths.length - 1; i++) {\n        const path = paths[i];\n        if (!model[path] || !isObject(model[path])) {\n            model[path] = /^\\d+$/.test(paths[i + 1]) ? [] : {};\n        }\n        model = model[path];\n    }\n    model[paths[paths.length - 1]] = clone(value);\n}\nfunction getFieldValue(field) {\n    let model = field.parent ? field.parent.model : field.model;\n    for (const path of getKeyPath(field)) {\n        if (!model) {\n            return model;\n        }\n        model = model[path];\n    }\n    return model;\n}\nfunction reverseDeepMerge(dest, ...args) {\n    args.forEach((src) => {\n        for (const srcArg in src) {\n            if (isNil(dest[srcArg]) || isBlankString(dest[srcArg])) {\n                dest[srcArg] = clone(src[srcArg]);\n            }\n            else if (objAndSameType(dest[srcArg], src[srcArg])) {\n                reverseDeepMerge(dest[srcArg], src[srcArg]);\n            }\n        }\n    });\n    return dest;\n}\n// check a value is null or undefined\nfunction isNil(value) {\n    return value == null;\n}\nfunction isUndefined(value) {\n    return value === undefined;\n}\nfunction isBlankString(value) {\n    return value === '';\n}\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\nfunction objAndSameType(obj1, obj2) {\n    return (isObject(obj1) &&\n        isObject(obj2) &&\n        Object.getPrototypeOf(obj1) === Object.getPrototypeOf(obj2) &&\n        !(Array.isArray(obj1) || Array.isArray(obj2)));\n}\nfunction isObject(x) {\n    return x != null && typeof x === 'object';\n}\nfunction isPromise(obj) {\n    return !!obj && typeof obj.then === 'function';\n}\nfunction clone(value) {\n    if (!isObject(value) ||\n        isObservable(value) ||\n        value instanceof TemplateRef ||\n        /* instanceof SafeHtmlImpl */ value.changingThisBreaksApplicationSecurity ||\n        ['RegExp', 'FileList', 'File', 'Blob'].indexOf(value.constructor.name) !== -1) {\n        return value;\n    }\n    if (value instanceof Set) {\n        return new Set(value);\n    }\n    if (value instanceof Map) {\n        return new Map(value);\n    }\n    // https://github.com/moment/moment/blob/master/moment.js#L252\n    if (value._isAMomentObject && isFunction(value.clone)) {\n        return value.clone();\n    }\n    if (value instanceof AbstractControl) {\n        return null;\n    }\n    if (value instanceof Date) {\n        return new Date(value.getTime());\n    }\n    if (Array.isArray(value)) {\n        return value.slice(0).map((v) => clone(v));\n    }\n    // best way to clone a js object maybe\n    // https://stackoverflow.com/questions/41474986/how-to-clone-a-javascript-es6-class-instance\n    const proto = Object.getPrototypeOf(value);\n    let c = Object.create(proto);\n    c = Object.setPrototypeOf(c, proto);\n    // need to make a deep copy so we dont use Object.assign\n    // also Object.assign wont copy property descriptor exactly\n    return Object.keys(value).reduce((newVal, prop) => {\n        const propDesc = Object.getOwnPropertyDescriptor(value, prop);\n        if (propDesc.get) {\n            Object.defineProperty(newVal, prop, propDesc);\n        }\n        else {\n            newVal[prop] = clone(value[prop]);\n        }\n        return newVal;\n    }, c);\n}\nfunction defineHiddenProp(field, prop, defaultValue) {\n    Object.defineProperty(field, prop, { enumerable: false, writable: true, configurable: true });\n    field[prop] = defaultValue;\n}\nfunction observeDeep(source, paths, setFn) {\n    let observers = [];\n    const unsubscribe = () => {\n        observers.forEach((observer) => observer());\n        observers = [];\n    };\n    const observer = observe(source, paths, ({ firstChange, currentValue }) => {\n        !firstChange && setFn();\n        unsubscribe();\n        if (isObject(currentValue) && currentValue.constructor.name === 'Object') {\n            Object.keys(currentValue).forEach((prop) => {\n                observers.push(observeDeep(source, [...paths, prop], setFn));\n            });\n        }\n    });\n    return () => {\n        observer.unsubscribe();\n        unsubscribe();\n    };\n}\nfunction observe(o, paths, setFn) {\n    if (!o._observers) {\n        defineHiddenProp(o, '_observers', {});\n    }\n    let target = o;\n    for (let i = 0; i < paths.length - 1; i++) {\n        if (!target[paths[i]] || !isObject(target[paths[i]])) {\n            target[paths[i]] = /^\\d+$/.test(paths[i + 1]) ? [] : {};\n        }\n        target = target[paths[i]];\n    }\n    const key = paths[paths.length - 1];\n    const prop = paths.join('.');\n    if (!o._observers[prop]) {\n        o._observers[prop] = { value: target[key], onChange: [] };\n    }\n    const state = o._observers[prop];\n    if (target[key] !== state.value) {\n        state.value = target[key];\n    }\n    if (state.onChange.indexOf(setFn) === -1) {\n        state.onChange.push(setFn);\n        setFn({ currentValue: state.value, firstChange: true });\n        if (state.onChange.length >= 1 && isObject(target)) {\n            const { enumerable } = Object.getOwnPropertyDescriptor(target, key) || { enumerable: true };\n            Object.defineProperty(target, key, {\n                enumerable,\n                configurable: true,\n                get: () => state.value,\n                set: (currentValue) => {\n                    if (currentValue !== state.value) {\n                        const previousValue = state.value;\n                        state.value = currentValue;\n                        state.onChange.forEach((changeFn) => changeFn({ previousValue, currentValue, firstChange: false }));\n                    }\n                },\n            });\n        }\n    }\n    return {\n        setValue(value) {\n            state.value = value;\n        },\n        unsubscribe() {\n            state.onChange = state.onChange.filter((changeFn) => changeFn !== setFn);\n            if (state.onChange.length === 0) {\n                delete o._observers[prop];\n            }\n        },\n    };\n}\nfunction getField(f, key) {\n    key = (Array.isArray(key) ? key.join('.') : key);\n    if (!f.fieldGroup) {\n        return undefined;\n    }\n    for (let i = 0, len = f.fieldGroup.length; i < len; i++) {\n        const c = f.fieldGroup[i];\n        const k = (Array.isArray(c.key) ? c.key.join('.') : c.key);\n        if (k === key) {\n            return c;\n        }\n        if (c.fieldGroup && (isNil(k) || key.indexOf(`${k}.`) === 0)) {\n            const field = getField(c, isNil(k) ? key : key.slice(k.length + 1));\n            if (field) {\n                return field;\n            }\n        }\n    }\n    return undefined;\n}\nfunction markFieldForCheck(field) {\n    field._componentRefs?.forEach((ref) => {\n        // NOTE: we cannot use ref.changeDetectorRef, see https://github.com/ngx-formly/ngx-formly/issues/2191\n        if (ref instanceof ComponentRef) {\n            const changeDetectorRef = ref.injector.get(ChangeDetectorRef);\n            changeDetectorRef.markForCheck();\n        }\n        else {\n            ref.markForCheck();\n        }\n    });\n}\n\n/**\n * An InjectionToken for registering additional formly config options (types, wrappers ...).\n */\nconst FORMLY_CONFIG = new InjectionToken('FORMLY_CONFIG');\n/**\n * Maintains list of formly config options. This can be used to register new field type.\n */\nclass FormlyConfig {\n    constructor() {\n        this.types = {};\n        this.validators = {};\n        this.wrappers = {};\n        this.messages = {};\n        this.extras = {\n            checkExpressionOn: 'modelChange',\n            lazyRender: true,\n            resetFieldOnHide: true,\n            renderFormlyFieldElement: true,\n            showError(field) {\n                return (field.formControl?.invalid &&\n                    (field.formControl?.touched || field.options.parentForm?.submitted || !!field.field.validation?.show));\n            },\n        };\n        this.extensions = {};\n        this.presets = {};\n        this.extensionsByPriority = {};\n    }\n    addConfig(config) {\n        if (config.types) {\n            config.types.forEach((type) => this.setType(type));\n        }\n        if (config.validators) {\n            config.validators.forEach((validator) => this.setValidator(validator));\n        }\n        if (config.wrappers) {\n            config.wrappers.forEach((wrapper) => this.setWrapper(wrapper));\n        }\n        if (config.validationMessages) {\n            config.validationMessages.forEach((validation) => this.addValidatorMessage(validation.name, validation.message));\n        }\n        if (config.extensions) {\n            this.setSortedExtensions(config.extensions);\n        }\n        if (config.extras) {\n            this.extras = { ...this.extras, ...config.extras };\n        }\n        if (config.presets) {\n            this.presets = {\n                ...this.presets,\n                ...config.presets.reduce((acc, curr) => ({ ...acc, [curr.name]: curr.config }), {}),\n            };\n        }\n    }\n    /**\n     * Allows you to specify a custom type which you can use in your field configuration.\n     * You can pass an object of options, or an array of objects of options.\n     */\n    setType(options) {\n        if (Array.isArray(options)) {\n            options.forEach((option) => this.setType(option));\n        }\n        else {\n            if (!this.types[options.name]) {\n                this.types[options.name] = { name: options.name };\n            }\n            ['component', 'extends', 'defaultOptions', 'wrappers'].forEach((prop) => {\n                if (options.hasOwnProperty(prop)) {\n                    this.types[options.name][prop] = options[prop];\n                }\n            });\n        }\n    }\n    getType(name, throwIfNotFound = false) {\n        if (name instanceof Type) {\n            return { component: name, name: name.prototype.constructor.name };\n        }\n        if (!this.types[name]) {\n            if (throwIfNotFound) {\n                throw new Error(`[Formly Error] The type \"${name}\" could not be found. Please make sure that is registered through the FormlyModule declaration.`);\n            }\n            return null;\n        }\n        this.mergeExtendedType(name);\n        return this.types[name];\n    }\n    /** @ignore */\n    getMergedField(field = {}) {\n        const type = this.getType(field.type);\n        if (!type) {\n            return;\n        }\n        if (type.defaultOptions) {\n            reverseDeepMerge(field, type.defaultOptions);\n        }\n        const extendDefaults = type.extends && this.getType(type.extends).defaultOptions;\n        if (extendDefaults) {\n            reverseDeepMerge(field, extendDefaults);\n        }\n        if (field?.optionsTypes) {\n            field.optionsTypes.forEach((option) => {\n                const defaultOptions = this.getType(option).defaultOptions;\n                if (defaultOptions) {\n                    reverseDeepMerge(field, defaultOptions);\n                }\n            });\n        }\n        const componentRef = this.resolveFieldTypeRef(field);\n        if (componentRef?.instance?.defaultOptions) {\n            reverseDeepMerge(field, componentRef.instance.defaultOptions);\n        }\n        if (!field.wrappers && type.wrappers) {\n            field.wrappers = [...type.wrappers];\n        }\n    }\n    /** @ignore @internal */\n    resolveFieldTypeRef(field = {}) {\n        const type = this.getType(field.type);\n        if (!type) {\n            return null;\n        }\n        if (!type.component || type._componentRef) {\n            return type._componentRef;\n        }\n        const { _viewContainerRef, _injector } = field.options;\n        if (!_viewContainerRef || !_injector) {\n            return null;\n        }\n        const componentRef = _viewContainerRef.createComponent(type.component, { injector: _injector });\n        defineHiddenProp(type, '_componentRef', componentRef);\n        try {\n            componentRef.destroy();\n        }\n        catch (e) {\n            console.error(`An error occurred while destroying the Formly component type \"${field.type}\"`, e);\n        }\n        return type._componentRef;\n    }\n    setWrapper(options) {\n        this.wrappers[options.name] = options;\n        if (options.types) {\n            options.types.forEach((type) => {\n                this.setTypeWrapper(type, options.name);\n            });\n        }\n    }\n    getWrapper(name) {\n        if (name instanceof Type) {\n            return { component: name, name: name.prototype.constructor.name };\n        }\n        if (!this.wrappers[name]) {\n            throw new Error(`[Formly Error] The wrapper \"${name}\" could not be found. Please make sure that is registered through the FormlyModule declaration.`);\n        }\n        return this.wrappers[name];\n    }\n    /** @ignore */\n    setTypeWrapper(type, name) {\n        if (!this.types[type]) {\n            this.types[type] = {};\n        }\n        if (!this.types[type].wrappers) {\n            this.types[type].wrappers = [];\n        }\n        if (this.types[type].wrappers.indexOf(name) === -1) {\n            this.types[type].wrappers.push(name);\n        }\n    }\n    setValidator(options) {\n        this.validators[options.name] = options;\n    }\n    getValidator(name) {\n        if (!this.validators[name]) {\n            throw new Error(`[Formly Error] The validator \"${name}\" could not be found. Please make sure that is registered through the FormlyModule declaration.`);\n        }\n        return this.validators[name];\n    }\n    addValidatorMessage(name, message) {\n        this.messages[name] = message;\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            const deprecated = { minlength: 'minLength', maxlength: 'maxLength' };\n            if (deprecated[name]) {\n                console.warn(`Formly deprecation: passing validation messages key '${name}' is deprecated since v6.0, use '${deprecated[name]}' instead.`);\n                this.messages[deprecated[name]] = message;\n            }\n        }\n    }\n    getValidatorMessage(name) {\n        return this.messages[name];\n    }\n    setSortedExtensions(extensionOptions) {\n        // insert new extensions, grouped by priority\n        extensionOptions.forEach((extensionOption) => {\n            const priority = extensionOption.priority ?? 1;\n            this.extensionsByPriority[priority] = {\n                ...this.extensionsByPriority[priority],\n                [extensionOption.name]: extensionOption.extension,\n            };\n        });\n        // flatten extensions object with sorted keys\n        this.extensions = Object.keys(this.extensionsByPriority)\n            .map(Number)\n            .sort((a, b) => a - b)\n            .reduce((acc, prio) => ({\n            ...acc,\n            ...this.extensionsByPriority[prio],\n        }), {});\n    }\n    mergeExtendedType(name) {\n        if (!this.types[name].extends) {\n            return;\n        }\n        const extendedType = this.getType(this.types[name].extends);\n        if (!this.types[name].component) {\n            this.types[name].component = extendedType.component;\n        }\n        if (!this.types[name].wrappers) {\n            this.types[name].wrappers = extendedType.wrappers;\n        }\n    }\n}\nFormlyConfig.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyConfig, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nFormlyConfig.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyConfig, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyConfig, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\nclass FormlyFormBuilder {\n    constructor(config, injector, viewContainerRef, parentForm) {\n        this.config = config;\n        this.injector = injector;\n        this.viewContainerRef = viewContainerRef;\n        this.parentForm = parentForm;\n    }\n    buildForm(form, fieldGroup = [], model, options) {\n        this.build({ fieldGroup, model, form, options });\n    }\n    build(field) {\n        if (!this.config.extensions.core) {\n            throw new Error('NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.');\n        }\n        if (!field.parent) {\n            this._setOptions(field);\n            disableTreeValidityCall(field.form, () => {\n                this._build(field);\n                const options = field.options;\n                options.checkExpressions?.(field, true);\n                options.detectChanges?.(field);\n            });\n        }\n        else {\n            this._build(field);\n        }\n    }\n    _build(field) {\n        if (!field) {\n            return;\n        }\n        const extensions = Object.values(this.config.extensions);\n        extensions.forEach((extension) => extension.prePopulate?.(field));\n        extensions.forEach((extension) => extension.onPopulate?.(field));\n        field.fieldGroup?.forEach((f) => this._build(f));\n        extensions.forEach((extension) => extension.postPopulate?.(field));\n    }\n    _setOptions(field) {\n        field.form = field.form || new FormGroup({});\n        field.model = field.model || {};\n        field.options = field.options || {};\n        const options = field.options;\n        if (!options._viewContainerRef) {\n            defineHiddenProp(options, '_viewContainerRef', this.viewContainerRef);\n        }\n        if (!options._injector) {\n            defineHiddenProp(options, '_injector', this.injector);\n        }\n        if (!options.build) {\n            options._buildForm = () => {\n                console.warn(`Formly: 'options._buildForm' is deprecated since v6.0, use 'options.build' instead.`);\n                this.build(field);\n            };\n            options.build = (f = field) => {\n                this.build(f);\n                return f;\n            };\n        }\n        if (!options.parentForm && this.parentForm) {\n            defineHiddenProp(options, 'parentForm', this.parentForm);\n            observe(options, ['parentForm', 'submitted'], ({ firstChange }) => {\n                if (!firstChange) {\n                    options.checkExpressions(field);\n                    options.detectChanges(field);\n                }\n            });\n        }\n    }\n}\nFormlyFormBuilder.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyFormBuilder, deps: [{ token: FormlyConfig }, { token: i0.Injector }, { token: i0.ViewContainerRef, optional: true }, { token: i2.FormGroupDirective, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });\nFormlyFormBuilder.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyFormBuilder, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyFormBuilder, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: FormlyConfig }, { type: i0.Injector }, { type: i0.ViewContainerRef, decorators: [{\n                    type: Optional\n                }] }, { type: i2.FormGroupDirective, decorators: [{\n                    type: Optional\n                }] }]; } });\n\nfunction unregisterControl(field, emitEvent = false) {\n    const control = field.formControl;\n    const fieldIndex = control._fields ? control._fields.indexOf(field) : -1;\n    if (fieldIndex !== -1) {\n        control._fields.splice(fieldIndex, 1);\n    }\n    const form = control.parent;\n    if (!form) {\n        return;\n    }\n    const opts = { emitEvent };\n    if (form instanceof FormArray) {\n        const key = form.controls.findIndex((c) => c === control);\n        if (key !== -1) {\n            form.removeAt(key, opts);\n        }\n    }\n    else if (form instanceof FormGroup) {\n        const paths = getKeyPath(field);\n        const key = paths[paths.length - 1];\n        if (form.get([key]) === control) {\n            form.removeControl(key, opts);\n        }\n    }\n    control.setParent(null);\n}\nfunction findControl(field) {\n    if (field.formControl) {\n        return field.formControl;\n    }\n    if (field.shareFormControl === false) {\n        return null;\n    }\n    return field.form?.get(getKeyPath(field));\n}\nfunction registerControl(field, control, emitEvent = false) {\n    control = control || field.formControl;\n    if (!control._fields) {\n        defineHiddenProp(control, '_fields', []);\n    }\n    if (control._fields.indexOf(field) === -1) {\n        control._fields.push(field);\n    }\n    if (!field.formControl && control) {\n        defineHiddenProp(field, 'formControl', control);\n        control.setValidators(null);\n        control.setAsyncValidators(null);\n        field.props.disabled = !!field.props.disabled;\n        const disabledObserver = observe(field, ['props', 'disabled'], ({ firstChange, currentValue }) => {\n            if (!firstChange) {\n                currentValue ? field.formControl.disable() : field.formControl.enable();\n            }\n        });\n        if (control instanceof FormControl) {\n            control.registerOnDisabledChange(disabledObserver.setValue);\n        }\n    }\n    if (!field.form || !hasKey(field)) {\n        return;\n    }\n    let form = field.form;\n    const paths = getKeyPath(field);\n    const value = getFieldValue(field);\n    if (!(isNil(control.value) && isNil(value)) && control.value !== value && control instanceof FormControl) {\n        control.patchValue(value);\n    }\n    for (let i = 0; i < paths.length - 1; i++) {\n        const path = paths[i];\n        if (!form.get([path])) {\n            form.setControl(path, new FormGroup({}), { emitEvent });\n        }\n        form = form.get([path]);\n    }\n    const key = paths[paths.length - 1];\n    if (!field._hide && form.get([key]) !== control) {\n        form.setControl(key, control, { emitEvent });\n    }\n}\nfunction updateValidity(c, onlySelf = false) {\n    const status = c.status;\n    const value = c.value;\n    c.updateValueAndValidity({ emitEvent: false, onlySelf });\n    if (status !== c.status) {\n        c.statusChanges.emit(c.status);\n    }\n    if (value !== c.value) {\n        c.valueChanges.emit(c.value);\n    }\n}\nfunction clearControl(form) {\n    delete form?._fields;\n    form.setValidators(null);\n    form.setAsyncValidators(null);\n    if (form instanceof FormGroup || form instanceof FormArray) {\n        Object.values(form.controls).forEach((c) => clearControl(c));\n    }\n}\n\nclass FormlyTemplate {\n    constructor(ref) {\n        this.ref = ref;\n    }\n    ngOnChanges() {\n        this.name = this.name || 'formly-group';\n    }\n}\nFormlyTemplate.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyTemplate, deps: [{ token: i0.TemplateRef }], target: i0.ɵɵFactoryTarget.Directive });\nFormlyTemplate.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.3.12\", type: FormlyTemplate, selector: \"[formlyTemplate]\", inputs: { name: [\"formlyTemplate\", \"name\"] }, usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyTemplate, decorators: [{\n            type: Directive,\n            args: [{ selector: '[formlyTemplate]' }]\n        }], ctorParameters: function () { return [{ type: i0.TemplateRef }]; }, propDecorators: { name: [{\n                type: Input,\n                args: ['formlyTemplate']\n            }] } });\n// workarround for https://github.com/angular/angular/issues/43227#issuecomment-904173738\nclass FormlyFieldTemplates {\n}\nFormlyFieldTemplates.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyFieldTemplates, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nFormlyFieldTemplates.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyFieldTemplates });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyFieldTemplates, decorators: [{\n            type: Injectable\n        }] });\n\n/**\n * The `<formly-field>` component is used to render the UI widget (layout + type) of a given `field`.\n */\nclass FormlyField {\n    constructor(config, renderer, _elementRef, hostContainerRef, form) {\n        this.config = config;\n        this.renderer = renderer;\n        this._elementRef = _elementRef;\n        this.hostContainerRef = hostContainerRef;\n        this.form = form;\n        this.hostObservers = [];\n        this.componentRefs = [];\n        this.hooksObservers = [];\n        this.detectFieldBuild = false;\n        this.valueChangesUnsubscribe = () => { };\n    }\n    get containerRef() {\n        return this.config.extras.renderFormlyFieldElement ? this.viewContainerRef : this.hostContainerRef;\n    }\n    get elementRef() {\n        if (this.config.extras.renderFormlyFieldElement) {\n            return this._elementRef;\n        }\n        if (this.componentRefs?.[0] instanceof ComponentRef) {\n            return this.componentRefs[0].location;\n        }\n        return null;\n    }\n    ngAfterContentInit() {\n        this.triggerHook('afterContentInit');\n    }\n    ngAfterViewInit() {\n        this.triggerHook('afterViewInit');\n    }\n    ngDoCheck() {\n        if (this.detectFieldBuild && this.field && this.field.options) {\n            this.render();\n        }\n    }\n    ngOnInit() {\n        this.triggerHook('onInit');\n    }\n    ngOnChanges(changes) {\n        this.triggerHook('onChanges', changes);\n    }\n    ngOnDestroy() {\n        this.resetRefs(this.field);\n        this.hostObservers.forEach((hostObserver) => hostObserver.unsubscribe());\n        this.hooksObservers.forEach((unsubscribe) => unsubscribe());\n        this.valueChangesUnsubscribe();\n        this.triggerHook('onDestroy');\n    }\n    renderField(containerRef, f, wrappers = []) {\n        if (this.containerRef === containerRef) {\n            this.resetRefs(this.field);\n            this.containerRef.clear();\n            wrappers = this.field?.wrappers;\n        }\n        if (wrappers?.length > 0) {\n            const [wrapper, ...wps] = wrappers;\n            const { component } = this.config.getWrapper(wrapper);\n            const ref = containerRef.createComponent(component);\n            this.attachComponentRef(ref, f);\n            observe(ref.instance, ['fieldComponent'], ({ currentValue, previousValue, firstChange }) => {\n                if (currentValue) {\n                    if (previousValue && previousValue._lContainer === currentValue._lContainer) {\n                        return;\n                    }\n                    const viewRef = previousValue ? previousValue.detach() : null;\n                    if (viewRef && !viewRef.destroyed) {\n                        currentValue.insert(viewRef);\n                    }\n                    else {\n                        this.renderField(currentValue, f, wps);\n                    }\n                    !firstChange && ref.changeDetectorRef.detectChanges();\n                }\n            });\n        }\n        else if (f?.type) {\n            const inlineType = this.form?.templates?.find((ref) => ref.name === f.type);\n            let ref;\n            if (inlineType) {\n                ref = containerRef.createEmbeddedView(inlineType.ref, { $implicit: f });\n            }\n            else {\n                const { component } = this.config.getType(f.type, true);\n                ref = containerRef.createComponent(component);\n            }\n            this.attachComponentRef(ref, f);\n        }\n    }\n    triggerHook(name, changes) {\n        if (name === 'onInit' || (name === 'onChanges' && changes.field && !changes.field.firstChange)) {\n            this.valueChangesUnsubscribe = this.fieldChanges(this.field);\n        }\n        if (this.field?.hooks?.[name]) {\n            if (!changes || changes.field) {\n                const r = this.field.hooks[name](this.field);\n                if (isObservable(r) && ['onInit', 'afterContentInit', 'afterViewInit'].indexOf(name) !== -1) {\n                    const sub = r.subscribe();\n                    this.hooksObservers.push(() => sub.unsubscribe());\n                }\n            }\n        }\n        if (name === 'onChanges' && changes.field) {\n            this.resetRefs(changes.field.previousValue);\n            this.render();\n        }\n    }\n    attachComponentRef(ref, field) {\n        this.componentRefs.push(ref);\n        field._componentRefs.push(ref);\n        if (ref instanceof ComponentRef) {\n            Object.assign(ref.instance, { field });\n        }\n    }\n    render() {\n        if (!this.field) {\n            return;\n        }\n        // require Formly build\n        if (!this.field.options) {\n            this.detectFieldBuild = true;\n            return;\n        }\n        this.detectFieldBuild = false;\n        this.hostObservers.forEach((hostObserver) => hostObserver.unsubscribe());\n        this.hostObservers = [\n            observe(this.field, ['hide'], ({ firstChange, currentValue }) => {\n                const containerRef = this.containerRef;\n                if (this.config.extras.lazyRender === false) {\n                    firstChange && this.renderField(containerRef, this.field);\n                    if (!firstChange || (firstChange && currentValue)) {\n                        this.elementRef &&\n                            this.renderer.setStyle(this.elementRef.nativeElement, 'display', currentValue ? 'none' : '');\n                    }\n                }\n                else {\n                    if (currentValue) {\n                        containerRef.clear();\n                        if (this.field.className) {\n                            this.renderer.removeAttribute(this.elementRef.nativeElement, 'class');\n                        }\n                    }\n                    else {\n                        this.renderField(containerRef, this.field);\n                        if (this.field.className) {\n                            this.renderer.setAttribute(this.elementRef.nativeElement, 'class', this.field.className);\n                        }\n                    }\n                }\n                !firstChange && this.field.options.detectChanges(this.field);\n            }),\n            observe(this.field, ['className'], ({ firstChange, currentValue }) => {\n                if ((!firstChange || (firstChange && currentValue)) &&\n                    (!this.config.extras.lazyRender || this.field.hide !== true)) {\n                    this.elementRef && this.renderer.setAttribute(this.elementRef.nativeElement, 'class', currentValue);\n                }\n            }),\n            ...['touched', 'pristine', 'status'].map((prop) => observe(this.field, ['formControl', prop], ({ firstChange }) => !firstChange && markFieldForCheck(this.field))),\n        ];\n    }\n    resetRefs(field) {\n        if (field) {\n            if (field._localFields) {\n                field._localFields = [];\n            }\n            else {\n                defineHiddenProp(this.field, '_localFields', []);\n            }\n            if (field._componentRefs) {\n                field._componentRefs = field._componentRefs.filter((ref) => this.componentRefs.indexOf(ref) === -1);\n            }\n            else {\n                defineHiddenProp(this.field, '_componentRefs', []);\n            }\n        }\n        this.componentRefs = [];\n    }\n    fieldChanges(field) {\n        this.valueChangesUnsubscribe();\n        if (!field) {\n            return () => { };\n        }\n        const subscribes = [observeDeep(field, ['props'], () => field.options.detectChanges(field))];\n        if (field.options) {\n            subscribes.push(observeDeep(field.options, ['formState'], () => field.options.detectChanges(field)));\n        }\n        for (const key of Object.keys(field._expressions || {})) {\n            const expressionObserver = observe(field, ['_expressions', key], ({ currentValue, previousValue }) => {\n                if (previousValue?.subscription) {\n                    previousValue.subscription.unsubscribe();\n                    previousValue.subscription = null;\n                }\n                if (isObservable(currentValue.value$)) {\n                    currentValue.subscription = currentValue.value$.subscribe();\n                }\n            });\n            subscribes.push(() => {\n                if (field._expressions[key]?.subscription) {\n                    field._expressions[key].subscription.unsubscribe();\n                }\n                expressionObserver.unsubscribe();\n            });\n        }\n        for (const path of [['template'], ['fieldGroupClassName'], ['validation', 'show']]) {\n            const fieldObserver = observe(field, path, ({ firstChange }) => !firstChange && field.options.detectChanges(field));\n            subscribes.push(() => fieldObserver.unsubscribe());\n        }\n        if (field.formControl && !field.fieldGroup) {\n            const control = field.formControl;\n            let valueChanges = control.valueChanges.pipe(distinctUntilChanged((x, y) => {\n                if (x !== y || Array.isArray(x) || isObject(x)) {\n                    return false;\n                }\n                return true;\n            }));\n            if (control.value !== getFieldValue(field)) {\n                valueChanges = valueChanges.pipe(startWith(control.value));\n            }\n            const { updateOn, debounce } = field.modelOptions;\n            if ((!updateOn || updateOn === 'change') && debounce?.default > 0) {\n                valueChanges = control.valueChanges.pipe(debounceTime(debounce.default));\n            }\n            const sub = valueChanges.subscribe((value) => {\n                // workaround for https://github.com/angular/angular/issues/13792\n                if (control._fields?.length > 1 && control instanceof FormControl) {\n                    control.patchValue(value, { emitEvent: false, onlySelf: true });\n                }\n                field.parsers?.forEach((parserFn) => (value = parserFn(value)));\n                if (value !== field.formControl.value) {\n                    field.formControl.setValue(value);\n                    return;\n                }\n                if (hasKey(field)) {\n                    assignFieldValue(field, value);\n                }\n                field.options.fieldChanges.next({ value, field, type: 'valueChanges' });\n            });\n            subscribes.push(() => sub.unsubscribe());\n        }\n        let templateFieldsSubs = [];\n        observe(field, ['_localFields'], ({ currentValue }) => {\n            templateFieldsSubs.forEach((unsubscribe) => unsubscribe());\n            templateFieldsSubs = (currentValue || []).map((f) => this.fieldChanges(f));\n        });\n        return () => {\n            subscribes.forEach((unsubscribe) => unsubscribe());\n            templateFieldsSubs.forEach((unsubscribe) => unsubscribe());\n        };\n    }\n}\nFormlyField.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyField, deps: [{ token: FormlyConfig }, { token: i0.Renderer2 }, { token: i0.ElementRef }, { token: i0.ViewContainerRef }, { token: FormlyFieldTemplates, optional: true }], target: i0.ɵɵFactoryTarget.Component });\nFormlyField.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.3.12\", type: FormlyField, selector: \"formly-field\", inputs: { field: \"field\" }, viewQueries: [{ propertyName: \"viewContainerRef\", first: true, predicate: [\"container\"], descendants: true, read: ViewContainerRef, static: true }], usesOnChanges: true, ngImport: i0, template: '<ng-template #container></ng-template>', isInline: true, styles: [\":host:empty{display:none}\\n\"] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyField, decorators: [{\n            type: Component,\n            args: [{ selector: 'formly-field', template: '<ng-template #container></ng-template>', styles: [\":host:empty{display:none}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: FormlyConfig }, { type: i0.Renderer2 }, { type: i0.ElementRef }, { type: i0.ViewContainerRef }, { type: FormlyFieldTemplates, decorators: [{\n                    type: Optional\n                }] }]; }, propDecorators: { field: [{\n                type: Input\n            }], viewContainerRef: [{\n                type: ViewChild,\n                args: ['container', { read: ViewContainerRef, static: true }]\n            }] } });\n\n/**\n * The `<form-form>` component is the main container of the form,\n * which takes care of managing the form state\n * and delegates the rendering of each field to `<formly-field>` component.\n */\nclass FormlyForm {\n    constructor(builder, config, ngZone, fieldTemplates) {\n        this.builder = builder;\n        this.config = config;\n        this.ngZone = ngZone;\n        this.fieldTemplates = fieldTemplates;\n        /** Event that is emitted when the model value is changed */\n        this.modelChange = new EventEmitter();\n        this.field = { type: 'formly-group' };\n        this._modelChangeValue = {};\n        this.valueChangesUnsubscribe = () => { };\n    }\n    /** The form instance which allow to track model value and validation status. */\n    set form(form) {\n        this.field.form = form;\n    }\n    get form() {\n        return this.field.form;\n    }\n    /** The model to be represented by the form. */\n    set model(model) {\n        if (this.config.extras.immutable && this._modelChangeValue === model) {\n            return;\n        }\n        this.setField({ model });\n    }\n    get model() {\n        return this.field.model;\n    }\n    /** The field configurations for building the form. */\n    set fields(fieldGroup) {\n        this.setField({ fieldGroup });\n    }\n    get fields() {\n        return this.field.fieldGroup;\n    }\n    /** Options for the form. */\n    set options(options) {\n        this.setField({ options });\n    }\n    get options() {\n        return this.field.options;\n    }\n    set templates(templates) {\n        this.fieldTemplates.templates = templates;\n    }\n    ngDoCheck() {\n        if (this.config.extras.checkExpressionOn === 'changeDetectionCheck') {\n            this.checkExpressionChange();\n        }\n    }\n    ngOnChanges(changes) {\n        if (changes.fields && this.form) {\n            clearControl(this.form);\n        }\n        if (changes.fields || changes.form || (changes.model && this._modelChangeValue !== changes.model.currentValue)) {\n            this.valueChangesUnsubscribe();\n            this.builder.build(this.field);\n            this.valueChangesUnsubscribe = this.valueChanges();\n        }\n    }\n    ngOnDestroy() {\n        this.valueChangesUnsubscribe();\n    }\n    checkExpressionChange() {\n        this.field.options.checkExpressions?.(this.field);\n    }\n    valueChanges() {\n        this.valueChangesUnsubscribe();\n        const sub = this.field.options.fieldChanges\n            .pipe(filter(({ field, type }) => hasKey(field) && type === 'valueChanges'), switchMap(() => this.ngZone.onStable.asObservable().pipe(take(1))))\n            .subscribe(() => this.ngZone.runGuarded(() => {\n            // runGuarded is used to keep in sync the expression changes\n            // https://github.com/ngx-formly/ngx-formly/issues/2095\n            this.checkExpressionChange();\n            this.modelChange.emit((this._modelChangeValue = clone(this.model)));\n        }));\n        return () => sub.unsubscribe();\n    }\n    setField(field) {\n        if (this.config.extras.immutable) {\n            this.field = { ...this.field, ...clone(field) };\n        }\n        else {\n            Object.keys(field).forEach((p) => (this.field[p] = field[p]));\n        }\n    }\n}\nFormlyForm.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyForm, deps: [{ token: FormlyFormBuilder }, { token: FormlyConfig }, { token: i0.NgZone }, { token: FormlyFieldTemplates }], target: i0.ɵɵFactoryTarget.Component });\nFormlyForm.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.3.12\", type: FormlyForm, selector: \"formly-form\", inputs: { form: \"form\", model: \"model\", fields: \"fields\", options: \"options\" }, outputs: { modelChange: \"modelChange\" }, providers: [FormlyFormBuilder, FormlyFieldTemplates], queries: [{ propertyName: \"templates\", predicate: FormlyTemplate }], usesOnChanges: true, ngImport: i0, template: '<formly-field [field]=\"field\"></formly-field>', isInline: true, components: [{ type: FormlyField, selector: \"formly-field\", inputs: [\"field\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyForm, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'formly-form',\n                    template: '<formly-field [field]=\"field\"></formly-field>',\n                    providers: [FormlyFormBuilder, FormlyFieldTemplates],\n                    changeDetection: ChangeDetectionStrategy.OnPush,\n                }]\n        }], ctorParameters: function () { return [{ type: FormlyFormBuilder }, { type: FormlyConfig }, { type: i0.NgZone }, { type: FormlyFieldTemplates }]; }, propDecorators: { form: [{\n                type: Input\n            }], model: [{\n                type: Input\n            }], fields: [{\n                type: Input\n            }], options: [{\n                type: Input\n            }], modelChange: [{\n                type: Output\n            }], templates: [{\n                type: ContentChildren,\n                args: [FormlyTemplate]\n            }] } });\n\n/**\n * Allow to link the `field` HTML attributes (`id`, `name` ...) and Event attributes (`focus`, `blur` ...) to an element in the DOM.\n */\nclass FormlyAttributes {\n    constructor(renderer, elementRef, _document) {\n        this.renderer = renderer;\n        this.elementRef = elementRef;\n        this.uiAttributesCache = {};\n        /**\n         * HostBinding doesn't register listeners conditionally which may produce some perf issues.\n         *\n         * Formly issue: https://github.com/ngx-formly/ngx-formly/issues/1991\n         */\n        this.uiEvents = {\n            listeners: [],\n            events: ['click', 'keyup', 'keydown', 'keypress', 'focus', 'blur', 'change'],\n            callback: (eventName, $event) => {\n                switch (eventName) {\n                    case 'focus':\n                        return this.onFocus($event);\n                    case 'blur':\n                        return this.onBlur($event);\n                    case 'change':\n                        return this.onChange($event);\n                    default:\n                        return this.props[eventName](this.field, $event);\n                }\n            },\n        };\n        this.document = _document;\n    }\n    get props() {\n        return this.field.props || {};\n    }\n    get fieldAttrElements() {\n        return this.field?.['_elementRefs'] || [];\n    }\n    ngOnChanges(changes) {\n        if (changes.field) {\n            this.field.name && this.setAttribute('name', this.field.name);\n            this.uiEvents.listeners.forEach((listener) => listener());\n            this.uiEvents.events.forEach((eventName) => {\n                if (this.props?.[eventName] || ['focus', 'blur', 'change'].indexOf(eventName) !== -1) {\n                    this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement, eventName, (e) => this.uiEvents.callback(eventName, e)));\n                }\n            });\n            if (this.props?.attributes) {\n                observe(this.field, ['props', 'attributes'], ({ currentValue, previousValue }) => {\n                    if (previousValue) {\n                        Object.keys(previousValue).forEach((attr) => this.removeAttribute(attr));\n                    }\n                    if (currentValue) {\n                        Object.keys(currentValue).forEach((attr) => {\n                            if (currentValue[attr] != null) {\n                                this.setAttribute(attr, currentValue[attr]);\n                            }\n                        });\n                    }\n                });\n            }\n            this.detachElementRef(changes.field.previousValue);\n            this.attachElementRef(changes.field.currentValue);\n            if (this.fieldAttrElements.length === 1) {\n                !this.id && this.field.id && this.setAttribute('id', this.field.id);\n                this.focusObserver = observe(this.field, ['focus'], ({ currentValue }) => {\n                    this.toggleFocus(currentValue);\n                });\n            }\n        }\n        if (changes.id) {\n            this.setAttribute('id', this.id);\n        }\n    }\n    /**\n     * We need to re-evaluate all the attributes on every change detection cycle, because\n     * by using a HostBinding we run into certain edge cases. This means that whatever logic\n     * is in here has to be super lean or we risk seriously damaging or destroying the performance.\n     *\n     * Formly issue: https://github.com/ngx-formly/ngx-formly/issues/1317\n     * Material issue: https://github.com/angular/components/issues/14024\n     */\n    ngDoCheck() {\n        if (!this.uiAttributes) {\n            const element = this.elementRef.nativeElement;\n            this.uiAttributes = [...FORMLY_VALIDATORS, 'tabindex', 'placeholder', 'readonly', 'disabled', 'step'].filter((attr) => !element.hasAttribute || !element.hasAttribute(attr));\n        }\n        this.uiAttributes.forEach((attr) => {\n            const value = this.props[attr];\n            if (this.uiAttributesCache[attr] !== value &&\n                (!this.props.attributes || !this.props.attributes.hasOwnProperty(attr.toLowerCase()))) {\n                this.uiAttributesCache[attr] = value;\n                if (value || value === 0) {\n                    this.setAttribute(attr, value === true ? attr : `${value}`);\n                }\n                else {\n                    this.removeAttribute(attr);\n                }\n            }\n        });\n    }\n    ngOnDestroy() {\n        this.uiEvents.listeners.forEach((listener) => listener());\n        this.detachElementRef(this.field);\n        this.focusObserver?.unsubscribe();\n    }\n    toggleFocus(value) {\n        const element = this.fieldAttrElements ? this.fieldAttrElements[0] : null;\n        if (!element || !element.nativeElement.focus) {\n            return;\n        }\n        const isFocused = !!this.document.activeElement &&\n            this.fieldAttrElements.some(({ nativeElement }) => this.document.activeElement === nativeElement || nativeElement.contains(this.document.activeElement));\n        if (value && !isFocused) {\n            Promise.resolve().then(() => element.nativeElement.focus());\n        }\n        else if (!value && isFocused) {\n            Promise.resolve().then(() => element.nativeElement.blur());\n        }\n    }\n    onFocus($event) {\n        this.focusObserver?.setValue(true);\n        this.props.focus?.(this.field, $event);\n    }\n    onBlur($event) {\n        this.focusObserver?.setValue(false);\n        this.props.blur?.(this.field, $event);\n    }\n    // handle custom `change` event, for regular ones rely on DOM listener\n    onHostChange($event) {\n        if ($event instanceof Event) {\n            return;\n        }\n        this.onChange($event);\n    }\n    onChange($event) {\n        this.props.change?.(this.field, $event);\n        this.field.formControl?.markAsDirty();\n    }\n    attachElementRef(f) {\n        if (!f) {\n            return;\n        }\n        if (f['_elementRefs']?.indexOf(this.elementRef) === -1) {\n            f['_elementRefs'].push(this.elementRef);\n        }\n        else {\n            defineHiddenProp(f, '_elementRefs', [this.elementRef]);\n        }\n    }\n    detachElementRef(f) {\n        const index = f?.['_elementRefs'] ? this.fieldAttrElements.indexOf(this.elementRef) : -1;\n        if (index !== -1) {\n            f['_elementRefs'].splice(index, 1);\n        }\n    }\n    setAttribute(attr, value) {\n        this.renderer.setAttribute(this.elementRef.nativeElement, attr, value);\n    }\n    removeAttribute(attr) {\n        this.renderer.removeAttribute(this.elementRef.nativeElement, attr);\n    }\n}\nFormlyAttributes.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyAttributes, deps: [{ token: i0.Renderer2 }, { token: i0.ElementRef }, { token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Directive });\nFormlyAttributes.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.3.12\", type: FormlyAttributes, selector: \"[formlyAttributes]\", inputs: { field: [\"formlyAttributes\", \"field\"], id: \"id\" }, host: { listeners: { \"change\": \"onHostChange($event)\" } }, usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyAttributes, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[formlyAttributes]',\n                    host: {\n                        '(change)': 'onHostChange($event)',\n                    },\n                }]\n        }], ctorParameters: function () { return [{ type: i0.Renderer2 }, { type: i0.ElementRef }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }]; }, propDecorators: { field: [{\n                type: Input,\n                args: ['formlyAttributes']\n            }], id: [{\n                type: Input\n            }] } });\n\nclass FieldType {\n    set controls(controls) {\n        const f = this.field;\n        f._localFields = controls\n            .map((c) => c.control._fields || [])\n            .flat()\n            .filter((f) => f.formControl !== this.field.formControl);\n    }\n    get model() {\n        return this.field.model;\n    }\n    get form() {\n        return this.field.form;\n    }\n    get options() {\n        return this.field.options;\n    }\n    get key() {\n        return this.field.key;\n    }\n    get formControl() {\n        return this.field.formControl;\n    }\n    get props() {\n        return (this.field.props || {});\n    }\n    /** @deprecated Use `props` instead. */\n    get to() {\n        return this.props;\n    }\n    get showError() {\n        return this.options.showError(this);\n    }\n    get id() {\n        return this.field.id;\n    }\n    get formState() {\n        return this.options.formState || {};\n    }\n}\nFieldType.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FieldType, deps: [], target: i0.ɵɵFactoryTarget.Directive });\nFieldType.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.3.12\", type: FieldType, inputs: { field: \"field\" }, viewQueries: [{ propertyName: \"controls\", predicate: NgControl, descendants: true }], ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FieldType, decorators: [{\n            type: Directive\n        }], propDecorators: { controls: [{\n                type: ViewChildren,\n                args: [NgControl]\n            }], field: [{\n                type: Input\n            }] } });\n\n/** @ignore */\nclass FormlyGroup extends FieldType {\n}\nFormlyGroup.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyGroup, deps: null, target: i0.ɵɵFactoryTarget.Component });\nFormlyGroup.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.3.12\", type: FormlyGroup, selector: \"formly-group\", host: { properties: { \"class\": \"field.fieldGroupClassName || \\\"\\\"\" } }, usesInheritance: true, ngImport: i0, template: `\n    <formly-field *ngFor=\"let f of field.fieldGroup\" [field]=\"f\"></formly-field>\n    <ng-content></ng-content>\n  `, isInline: true, components: [{ type: FormlyField, selector: \"formly-field\", inputs: [\"field\"] }], directives: [{ type: i2$1.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyGroup, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'formly-group',\n                    template: `\n    <formly-field *ngFor=\"let f of field.fieldGroup\" [field]=\"f\"></formly-field>\n    <ng-content></ng-content>\n  `,\n                    host: {\n                        '[class]': 'field.fieldGroupClassName || \"\"',\n                    },\n                    changeDetection: ChangeDetectionStrategy.OnPush,\n                }]\n        }] });\n\n/**\n * The `<formly-validation-message>` component renders the error message of a given `field`.\n */\nclass FormlyValidationMessage {\n    constructor(config) {\n        this.config = config;\n    }\n    ngOnChanges() {\n        const EXPR_VALIDATORS = FORMLY_VALIDATORS.map((v) => `templateOptions.${v}`);\n        this.errorMessage$ = merge(this.field.formControl.statusChanges, !this.field.options\n            ? of(null)\n            : this.field.options.fieldChanges.pipe(filter(({ field, type, property }) => {\n                return (field === this.field &&\n                    type === 'expressionChanges' &&\n                    (property.indexOf('validation') !== -1 || EXPR_VALIDATORS.indexOf(property) !== -1));\n            }))).pipe(startWith(null), switchMap(() => (isObservable(this.errorMessage) ? this.errorMessage : of(this.errorMessage))));\n    }\n    get errorMessage() {\n        const fieldForm = this.field.formControl;\n        for (const error in fieldForm.errors) {\n            if (fieldForm.errors.hasOwnProperty(error)) {\n                let message = this.config.getValidatorMessage(error);\n                if (isObject(fieldForm.errors[error])) {\n                    if (fieldForm.errors[error].errorPath) {\n                        return undefined;\n                    }\n                    if (fieldForm.errors[error].message) {\n                        message = fieldForm.errors[error].message;\n                    }\n                }\n                if (this.field.validation?.messages?.[error]) {\n                    message = this.field.validation.messages[error];\n                }\n                if (this.field.validators?.[error]?.message) {\n                    message = this.field.validators[error].message;\n                }\n                if (this.field.asyncValidators?.[error]?.message) {\n                    message = this.field.asyncValidators[error].message;\n                }\n                if (typeof message === 'function') {\n                    return message(fieldForm.errors[error], this.field);\n                }\n                return message;\n            }\n        }\n        return undefined;\n    }\n}\nFormlyValidationMessage.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyValidationMessage, deps: [{ token: FormlyConfig }], target: i0.ɵɵFactoryTarget.Component });\nFormlyValidationMessage.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.3.12\", type: FormlyValidationMessage, selector: \"formly-validation-message\", inputs: { field: \"field\" }, usesOnChanges: true, ngImport: i0, template: '{{ errorMessage$ | async }}', isInline: true, pipes: { \"async\": i2$1.AsyncPipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyValidationMessage, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'formly-validation-message',\n                    template: '{{ errorMessage$ | async }}',\n                    changeDetection: ChangeDetectionStrategy.OnPush,\n                }]\n        }], ctorParameters: function () { return [{ type: FormlyConfig }]; }, propDecorators: { field: [{\n                type: Input\n            }] } });\n\nclass FieldArrayType extends FieldType {\n    onPopulate(field) {\n        if (hasKey(field)) {\n            const control = findControl(field);\n            registerControl(field, control ? control : new FormArray([], { updateOn: field.modelOptions.updateOn }));\n        }\n        field.fieldGroup = field.fieldGroup || [];\n        const length = Array.isArray(field.model) ? field.model.length : 0;\n        if (field.fieldGroup.length > length) {\n            for (let i = field.fieldGroup.length - 1; i >= length; --i) {\n                unregisterControl(field.fieldGroup[i], true);\n                field.fieldGroup.splice(i, 1);\n            }\n        }\n        for (let i = field.fieldGroup.length; i < length; i++) {\n            const f = {\n                ...clone(typeof field.fieldArray === 'function' ? field.fieldArray(field) : field.fieldArray),\n                key: `${i}`,\n            };\n            field.fieldGroup.push(f);\n        }\n    }\n    add(i, initialModel, { markAsDirty } = { markAsDirty: true }) {\n        i = i == null ? this.field.fieldGroup.length : i;\n        if (!this.model) {\n            assignFieldValue(this.field, []);\n        }\n        this.model.splice(i, 0, initialModel ? clone(initialModel) : undefined);\n        this._build();\n        markAsDirty && this.formControl.markAsDirty();\n    }\n    remove(i, { markAsDirty } = { markAsDirty: true }) {\n        this.model.splice(i, 1);\n        const field = this.field.fieldGroup[i];\n        this.field.fieldGroup.splice(i, 1);\n        this.field.fieldGroup.forEach((f, key) => (f.key = `${key}`));\n        unregisterControl(field, true);\n        this._build();\n        markAsDirty && this.formControl.markAsDirty();\n    }\n    _build() {\n        const fields = this.field.formControl._fields ?? [this.field];\n        fields.forEach((f) => this.options.build(f));\n        this.options.fieldChanges.next({\n            field: this.field,\n            value: getFieldValue(this.field),\n            type: 'valueChanges',\n        });\n    }\n}\nFieldArrayType.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FieldArrayType, deps: null, target: i0.ɵɵFactoryTarget.Directive });\nFieldArrayType.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.3.12\", type: FieldArrayType, usesInheritance: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FieldArrayType, decorators: [{\n            type: Directive\n        }] });\n\nclass FieldWrapper extends FieldType {\n    set _staticContent(content) {\n        this.fieldComponent = content;\n    }\n}\nFieldWrapper.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FieldWrapper, deps: null, target: i0.ɵɵFactoryTarget.Directive });\nFieldWrapper.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.3.12\", type: FieldWrapper, viewQueries: [{ propertyName: \"fieldComponent\", first: true, predicate: [\"fieldComponent\"], descendants: true, read: ViewContainerRef }, { propertyName: \"_staticContent\", first: true, predicate: [\"fieldComponent\"], descendants: true, read: ViewContainerRef, static: true }], usesInheritance: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FieldWrapper, decorators: [{\n            type: Directive\n        }], propDecorators: { fieldComponent: [{\n                type: ViewChild,\n                args: ['fieldComponent', { read: ViewContainerRef }]\n            }], _staticContent: [{\n                type: ViewChild,\n                args: ['fieldComponent', { read: ViewContainerRef, static: true }]\n            }] } });\n\n/** @ignore */\nclass FormlyTemplateType extends FieldType {\n    constructor(sanitizer) {\n        super();\n        this.sanitizer = sanitizer;\n        this.innerHtml = {};\n    }\n    get template() {\n        if (this.field && this.field.template !== this.innerHtml.template) {\n            this.innerHtml = {\n                template: this.field.template,\n                content: this.props.safeHtml\n                    ? this.sanitizer.bypassSecurityTrustHtml(this.field.template)\n                    : this.field.template,\n            };\n        }\n        return this.innerHtml.content;\n    }\n}\nFormlyTemplateType.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyTemplateType, deps: [{ token: i1.DomSanitizer }], target: i0.ɵɵFactoryTarget.Component });\nFormlyTemplateType.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.3.12\", type: FormlyTemplateType, selector: \"formly-template\", usesInheritance: true, ngImport: i0, template: `<div [innerHtml]=\"template\"></div>`, isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyTemplateType, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'formly-template',\n                    template: `<div [innerHtml]=\"template\"></div>`,\n                    changeDetection: ChangeDetectionStrategy.OnPush,\n                }]\n        }], ctorParameters: function () { return [{ type: i1.DomSanitizer }]; } });\n\nfunction evalStringExpression(expression, argNames) {\n    try {\n        return Function(...argNames, `return ${expression};`);\n    }\n    catch (error) {\n        console.error(error);\n    }\n}\nfunction evalExpression(expression, thisArg, argVal) {\n    if (typeof expression === 'function') {\n        return expression.apply(thisArg, argVal);\n    }\n    else {\n        return expression ? true : false;\n    }\n}\n\nclass FieldExpressionExtension {\n    onPopulate(field) {\n        if (field._expressions) {\n            return;\n        }\n        // cache built expression\n        defineHiddenProp(field, '_expressions', {});\n        observe(field, ['hide'], ({ currentValue, firstChange }) => {\n            defineHiddenProp(field, '_hide', !!currentValue);\n            if (!firstChange || (firstChange && currentValue === true)) {\n                field.props.hidden = currentValue;\n                field.options._hiddenFieldsForCheck.push(field);\n            }\n        });\n        if (field.hideExpression) {\n            observe(field, ['hideExpression'], ({ currentValue: expr }) => {\n                field._expressions.hide = this.parseExpressions(field, 'hide', typeof expr === 'boolean' ? () => expr : expr);\n            });\n        }\n        const evalExpr = (key, expr) => {\n            if (typeof expr === 'string' || isFunction(expr)) {\n                field._expressions[key] = this.parseExpressions(field, key, expr);\n            }\n            else if (expr instanceof Observable) {\n                field._expressions[key] = {\n                    value$: expr.pipe(tap((v) => {\n                        this.evalExpr(field, key, v);\n                        field.options.detectChanges(field);\n                    })),\n                };\n            }\n        };\n        field.expressions = field.expressions || {};\n        for (const key of Object.keys(field.expressions)) {\n            observe(field, ['expressions', key], ({ currentValue: expr }) => {\n                evalExpr(key, isFunction(expr) ? (...args) => expr(field, args[3]) : expr);\n            });\n        }\n        field.expressionProperties = field.expressionProperties || {};\n        for (const key of Object.keys(field.expressionProperties)) {\n            observe(field, ['expressionProperties', key], ({ currentValue }) => evalExpr(key, currentValue));\n        }\n    }\n    postPopulate(field) {\n        if (field.parent) {\n            return;\n        }\n        if (!field.options.checkExpressions) {\n            let checkLocked = false;\n            field.options.checkExpressions = (f, ignoreCache) => {\n                if (checkLocked) {\n                    return;\n                }\n                checkLocked = true;\n                const fieldChanged = this.checkExpressions(f, ignoreCache);\n                const options = field.options;\n                options._hiddenFieldsForCheck\n                    .sort((f) => (f.hide ? -1 : 1))\n                    .forEach((f) => this.changeHideState(f, f.hide, !ignoreCache));\n                options._hiddenFieldsForCheck = [];\n                if (fieldChanged) {\n                    this.checkExpressions(field);\n                    if (field.options && field.options.detectChanges) {\n                        field.options.detectChanges(field);\n                    }\n                }\n                checkLocked = false;\n            };\n            field.options._checkField = (f, ignoreCache) => {\n                console.warn(`Formly: 'options._checkField' is deprecated since v6.0, use 'options.checkExpressions' instead.`);\n                field.options.checkExpressions(f, ignoreCache);\n            };\n        }\n    }\n    parseExpressions(field, path, expr) {\n        let parentExpression;\n        if (field.parent && ['hide', 'props.disabled'].includes(path)) {\n            const rootValue = (f) => {\n                return path === 'hide' ? f.hide : f.props.disabled;\n            };\n            parentExpression = () => {\n                let root = field.parent;\n                while (root.parent && !rootValue(root)) {\n                    root = root.parent;\n                }\n                return rootValue(root);\n            };\n        }\n        expr = expr || (() => false);\n        if (typeof expr === 'string') {\n            expr = evalStringExpression(expr, ['model', 'formState', 'field']);\n        }\n        let currentValue;\n        return {\n            callback: (ignoreCache) => {\n                try {\n                    const exprValue = evalExpression(parentExpression ? (...args) => parentExpression(field) || expr(...args) : expr, { field }, [field.model, field.options.formState, field, ignoreCache]);\n                    if (ignoreCache ||\n                        (currentValue !== exprValue &&\n                            (!isObject(exprValue) ||\n                                isObservable(exprValue) ||\n                                JSON.stringify(exprValue) !== JSON.stringify(currentValue)))) {\n                        currentValue = exprValue;\n                        this.evalExpr(field, path, exprValue);\n                        return true;\n                    }\n                    return false;\n                }\n                catch (error) {\n                    error.message = `[Formly Error] [Expression \"${path}\"] ${error.message}`;\n                    throw error;\n                }\n            },\n        };\n    }\n    checkExpressions(field, ignoreCache = false) {\n        if (!field) {\n            return false;\n        }\n        let fieldChanged = false;\n        if (field._expressions) {\n            for (const key of Object.keys(field._expressions)) {\n                field._expressions[key].callback?.(ignoreCache) && (fieldChanged = true);\n            }\n        }\n        field.fieldGroup?.forEach((f) => this.checkExpressions(f, ignoreCache) && (fieldChanged = true));\n        return fieldChanged;\n    }\n    changeDisabledState(field, value) {\n        if (field.fieldGroup) {\n            field.fieldGroup\n                .filter((f) => !f._expressions.hasOwnProperty('props.disabled'))\n                .forEach((f) => this.changeDisabledState(f, value));\n        }\n        if (hasKey(field) && field.props.disabled !== value) {\n            field.props.disabled = value;\n        }\n    }\n    changeHideState(field, hide, resetOnHide) {\n        if (field.fieldGroup) {\n            field.fieldGroup\n                .filter((f) => !f._expressions.hide)\n                .forEach((f) => this.changeHideState(f, hide, resetOnHide));\n        }\n        if (field.formControl && hasKey(field)) {\n            defineHiddenProp(field, '_hide', !!(hide || field.hide));\n            const c = field.formControl;\n            if (c._fields?.length > 1) {\n                updateValidity(c);\n            }\n            if (hide === true && (!c._fields || c._fields.every((f) => !!f._hide))) {\n                unregisterControl(field, true);\n                if (resetOnHide && field.resetOnHide) {\n                    assignFieldValue(field, undefined);\n                    field.formControl.reset({ value: undefined, disabled: field.formControl.disabled });\n                    field.options.fieldChanges.next({ value: undefined, field, type: 'valueChanges' });\n                    if (field.fieldGroup && field.formControl instanceof FormArray) {\n                        field.fieldGroup.length = 0;\n                    }\n                }\n            }\n            else if (hide === false) {\n                if (field.resetOnHide && !isUndefined(field.defaultValue) && isUndefined(getFieldValue(field))) {\n                    assignFieldValue(field, field.defaultValue);\n                }\n                registerControl(field, undefined, true);\n                if (field.resetOnHide && field.fieldArray && field.fieldGroup?.length !== field.model?.length) {\n                    field.options.build(field);\n                }\n            }\n        }\n        if (field.options.fieldChanges) {\n            field.options.fieldChanges.next({ field, type: 'hidden', value: hide });\n        }\n    }\n    evalExpr(field, prop, value) {\n        if (prop.indexOf('model.') === 0) {\n            const key = prop.replace(/^model\\./, ''), parent = field.fieldGroup ? field : field.parent;\n            let control = field?.key === key ? field.formControl : field.form.get(key);\n            if (!control && field.get(key)) {\n                control = field.get(key).formControl;\n            }\n            assignFieldValue({ key, parent, model: field.model }, value);\n            if (control && !(isNil(control.value) && isNil(value)) && control.value !== value) {\n                control.patchValue(value);\n            }\n        }\n        else {\n            try {\n                let target = field;\n                const paths = this._evalExpressionPath(field, prop);\n                const lastIndex = paths.length - 1;\n                for (let i = 0; i < lastIndex; i++) {\n                    target = target[paths[i]];\n                }\n                target[paths[lastIndex]] = value;\n            }\n            catch (error) {\n                error.message = `[Formly Error] [Expression \"${prop}\"] ${error.message}`;\n                throw error;\n            }\n            if (['templateOptions.disabled', 'props.disabled'].includes(prop) && hasKey(field)) {\n                this.changeDisabledState(field, value);\n            }\n        }\n        this.emitExpressionChanges(field, prop, value);\n    }\n    emitExpressionChanges(field, property, value) {\n        if (!field.options.fieldChanges) {\n            return;\n        }\n        field.options.fieldChanges.next({\n            field,\n            type: 'expressionChanges',\n            property,\n            value,\n        });\n    }\n    _evalExpressionPath(field, prop) {\n        if (field._expressions[prop] && field._expressions[prop].paths) {\n            return field._expressions[prop].paths;\n        }\n        let paths = [];\n        if (prop.indexOf('[') === -1) {\n            paths = prop.split('.');\n        }\n        else {\n            prop\n                .split(/[[\\]]{1,2}/) // https://stackoverflow.com/a/20198206\n                .filter((p) => p)\n                .forEach((path) => {\n                const arrayPath = path.match(/['|\"](.*?)['|\"]/);\n                if (arrayPath) {\n                    paths.push(arrayPath[1]);\n                }\n                else {\n                    paths.push(...path.split('.').filter((p) => p));\n                }\n            });\n        }\n        if (field._expressions[prop]) {\n            field._expressions[prop].paths = paths;\n        }\n        return paths;\n    }\n}\n\nclass FieldValidationExtension {\n    constructor(config) {\n        this.config = config;\n    }\n    onPopulate(field) {\n        this.initFieldValidation(field, 'validators');\n        this.initFieldValidation(field, 'asyncValidators');\n    }\n    initFieldValidation(field, type) {\n        const validators = [];\n        if (type === 'validators' && !(field.hasOwnProperty('fieldGroup') && !hasKey(field))) {\n            validators.push(this.getPredefinedFieldValidation(field));\n        }\n        if (field[type]) {\n            for (const validatorName of Object.keys(field[type])) {\n                validatorName === 'validation'\n                    ? validators.push(...field[type].validation.map((v) => this.wrapNgValidatorFn(field, v)))\n                    : validators.push(this.wrapNgValidatorFn(field, field[type][validatorName], validatorName));\n            }\n        }\n        defineHiddenProp(field, '_' + type, validators);\n    }\n    getPredefinedFieldValidation(field) {\n        let VALIDATORS = [];\n        FORMLY_VALIDATORS.forEach((opt) => observe(field, ['props', opt], ({ currentValue, firstChange }) => {\n            VALIDATORS = VALIDATORS.filter((o) => o !== opt);\n            if (currentValue != null && currentValue !== false) {\n                VALIDATORS.push(opt);\n            }\n            if (!firstChange && field.formControl) {\n                updateValidity(field.formControl);\n            }\n        }));\n        return (control) => {\n            if (VALIDATORS.length === 0) {\n                return null;\n            }\n            return Validators.compose(VALIDATORS.map((opt) => () => {\n                const value = field.props[opt];\n                switch (opt) {\n                    case 'required':\n                        return Validators.required(control);\n                    case 'pattern':\n                        return Validators.pattern(value)(control);\n                    case 'minLength':\n                        const minLengthResult = Validators.minLength(value)(control);\n                        const minLengthKey = this.config.getValidatorMessage('minlength') || field.validation?.messages?.minlength\n                            ? 'minlength'\n                            : 'minLength';\n                        return minLengthResult ? { [minLengthKey]: minLengthResult.minlength } : null;\n                    case 'maxLength':\n                        const maxLengthResult = Validators.maxLength(value)(control);\n                        const maxLengthKey = this.config.getValidatorMessage('maxlength') || field.validation?.messages?.maxlength\n                            ? 'maxlength'\n                            : 'maxLength';\n                        return maxLengthResult ? { [maxLengthKey]: maxLengthResult.maxlength } : null;\n                    case 'min':\n                        return Validators.min(value)(control);\n                    case 'max':\n                        return Validators.max(value)(control);\n                    default:\n                        return null;\n                }\n            }))(control);\n        };\n    }\n    wrapNgValidatorFn(field, validator, validatorName) {\n        let validatorOption;\n        if (typeof validator === 'string') {\n            validatorOption = clone(this.config.getValidator(validator));\n        }\n        if (typeof validator === 'object' && validator.name) {\n            validatorOption = clone(this.config.getValidator(validator.name));\n            if (validator.options) {\n                validatorOption.options = validator.options;\n            }\n        }\n        if (typeof validator === 'object' && validator.expression) {\n            const { expression, ...options } = validator;\n            validatorOption = {\n                name: validatorName,\n                validation: expression,\n                options: Object.keys(options).length > 0 ? options : null,\n            };\n        }\n        if (typeof validator === 'function') {\n            validatorOption = {\n                name: validatorName,\n                validation: validator,\n            };\n        }\n        return (control) => {\n            const errors = validatorOption.validation(control, field, validatorOption.options);\n            if (isPromise(errors)) {\n                return errors.then((v) => this.handleAsyncResult(field, validatorName ? !!v : v, validatorOption));\n            }\n            if (isObservable(errors)) {\n                return errors.pipe(map((v) => this.handleAsyncResult(field, validatorName ? !!v : v, validatorOption)));\n            }\n            return this.handleResult(field, validatorName ? !!errors : errors, validatorOption);\n        };\n    }\n    handleAsyncResult(field, errors, options) {\n        // workaround for https://github.com/angular/angular/issues/13200\n        field.options.detectChanges(field);\n        return this.handleResult(field, errors, options);\n    }\n    handleResult(field, errors, { name, options }) {\n        if (typeof errors === 'boolean') {\n            errors = errors ? null : { [name]: options ? options : true };\n        }\n        const ctrl = field.formControl;\n        ctrl?._childrenErrors?.[name]?.();\n        if (isObject(errors)) {\n            Object.keys(errors).forEach((name) => {\n                const errorPath = errors[name].errorPath ? errors[name].errorPath : options?.errorPath;\n                const childCtrl = errorPath ? field.formControl.get(errorPath) : null;\n                if (childCtrl) {\n                    const { errorPath: _errorPath, ...opts } = errors[name];\n                    childCtrl.setErrors({ ...(childCtrl.errors || {}), [name]: opts });\n                    !ctrl._childrenErrors && defineHiddenProp(ctrl, '_childrenErrors', {});\n                    ctrl._childrenErrors[name] = () => {\n                        const { [name]: _toDelete, ...childErrors } = childCtrl.errors || {};\n                        childCtrl.setErrors(Object.keys(childErrors).length === 0 ? null : childErrors);\n                    };\n                }\n            });\n        }\n        return errors;\n    }\n}\n\nclass FieldFormExtension {\n    prePopulate(field) {\n        if (!this.root) {\n            this.root = field;\n        }\n        if (field.parent) {\n            Object.defineProperty(field, 'form', {\n                get: () => field.parent.formControl,\n                configurable: true,\n            });\n        }\n    }\n    onPopulate(field) {\n        if (field.hasOwnProperty('fieldGroup') && !hasKey(field)) {\n            defineHiddenProp(field, 'formControl', field.form);\n        }\n        else {\n            this.addFormControl(field);\n        }\n    }\n    postPopulate(field) {\n        if (this.root !== field) {\n            return;\n        }\n        this.root = null;\n        const markForCheck = this.setValidators(field);\n        if (markForCheck && field.parent) {\n            let parent = field.parent;\n            while (parent) {\n                if (hasKey(parent) || !parent.parent) {\n                    updateValidity(parent.formControl, true);\n                }\n                parent = parent.parent;\n            }\n        }\n    }\n    addFormControl(field) {\n        let control = findControl(field);\n        if (field.fieldArray) {\n            return;\n        }\n        if (!control) {\n            const controlOptions = { updateOn: field.modelOptions.updateOn };\n            if (field.fieldGroup) {\n                control = new FormGroup({}, controlOptions);\n            }\n            else {\n                const value = hasKey(field) ? getFieldValue(field) : field.defaultValue;\n                control = new FormControl({ value, disabled: !!field.props.disabled }, { ...controlOptions, initialValueIsDefault: true });\n            }\n        }\n        registerControl(field, control);\n    }\n    setValidators(field, disabled = false) {\n        if (disabled === false && hasKey(field) && field.props?.disabled) {\n            disabled = true;\n        }\n        let markForCheck = false;\n        field.fieldGroup?.forEach((f) => f && this.setValidators(f, disabled) && (markForCheck = true));\n        if (hasKey(field) || !field.parent || (!hasKey(field) && !field.fieldGroup)) {\n            const { formControl: c } = field;\n            if (c) {\n                if (hasKey(field) && c instanceof FormControl) {\n                    if (disabled && c.enabled) {\n                        c.disable({ emitEvent: false, onlySelf: true });\n                        markForCheck = true;\n                    }\n                    if (!disabled && c.disabled) {\n                        c.enable({ emitEvent: false, onlySelf: true });\n                        markForCheck = true;\n                    }\n                }\n                if (null === c.validator || null === c.asyncValidator) {\n                    c.setValidators(() => {\n                        const v = Validators.compose(this.mergeValidators(field, '_validators'));\n                        return v ? v(c) : null;\n                    });\n                    c.setAsyncValidators(() => {\n                        const v = Validators.composeAsync(this.mergeValidators(field, '_asyncValidators'));\n                        return v ? v(c) : of(null);\n                    });\n                    markForCheck = true;\n                }\n                if (markForCheck) {\n                    updateValidity(c, true);\n                    // update validity of `FormGroup` instance created by field with nested key.\n                    let parent = c.parent;\n                    for (let i = 1; i < getKeyPath(field).length; i++) {\n                        if (parent) {\n                            updateValidity(parent, true);\n                            parent = parent.parent;\n                        }\n                    }\n                }\n            }\n        }\n        return markForCheck;\n    }\n    mergeValidators(field, type) {\n        const validators = [];\n        const c = field.formControl;\n        if (c?._fields?.length > 1) {\n            c._fields\n                .filter((f) => !f._hide)\n                .forEach((f) => validators.push(...f[type]));\n        }\n        else if (field[type]) {\n            validators.push(...field[type]);\n        }\n        if (field.fieldGroup) {\n            field.fieldGroup\n                .filter((f) => f?.fieldGroup && !hasKey(f))\n                .forEach((f) => validators.push(...this.mergeValidators(f, type)));\n        }\n        return validators;\n    }\n}\n\nclass CoreExtension {\n    constructor(config) {\n        this.config = config;\n        this.formId = 0;\n    }\n    prePopulate(field) {\n        const root = field.parent;\n        this.initRootOptions(field);\n        this.initFieldProps(field);\n        if (root) {\n            Object.defineProperty(field, 'options', { get: () => root.options, configurable: true });\n            Object.defineProperty(field, 'model', {\n                get: () => (hasKey(field) && field.fieldGroup ? getFieldValue(field) : root.model),\n                configurable: true,\n            });\n        }\n        Object.defineProperty(field, 'get', {\n            value: (key) => getField(field, key),\n            configurable: true,\n        });\n        this.getFieldComponentInstance(field).prePopulate?.(field);\n    }\n    onPopulate(field) {\n        this.initFieldOptions(field);\n        this.getFieldComponentInstance(field).onPopulate?.(field);\n        if (field.fieldGroup) {\n            field.fieldGroup.forEach((f, index) => {\n                if (f) {\n                    Object.defineProperty(f, 'parent', { get: () => field, configurable: true });\n                    Object.defineProperty(f, 'index', { get: () => index, configurable: true });\n                }\n                this.formId++;\n            });\n        }\n    }\n    postPopulate(field) {\n        this.getFieldComponentInstance(field).postPopulate?.(field);\n    }\n    initFieldProps(field) {\n        field.props ?? (field.props = field.templateOptions);\n        Object.defineProperty(field, 'templateOptions', {\n            get: () => field.props,\n            set: (props) => (field.props = props),\n            configurable: true,\n        });\n    }\n    initRootOptions(field) {\n        if (field.parent) {\n            return;\n        }\n        const options = field.options;\n        field.options.formState = field.options.formState || {};\n        if (!options.showError) {\n            options.showError = this.config.extras.showError;\n        }\n        if (!options.fieldChanges) {\n            defineHiddenProp(options, 'fieldChanges', new Subject());\n        }\n        if (!options._hiddenFieldsForCheck) {\n            options._hiddenFieldsForCheck = [];\n        }\n        options._markForCheck = (f) => {\n            console.warn(`Formly: 'options._markForCheck' is deprecated since v6.0, use 'options.detectChanges' instead.`);\n            options.detectChanges(f);\n        };\n        options.detectChanges = (f) => {\n            if (f._componentRefs) {\n                f.options.checkExpressions(f);\n                markFieldForCheck(f);\n            }\n            f.fieldGroup?.forEach((f) => f && options.detectChanges(f));\n        };\n        options.resetModel = (model) => {\n            model = clone(model ?? options._initialModel);\n            if (field.model) {\n                Object.keys(field.model).forEach((k) => delete field.model[k]);\n                Object.assign(field.model, model || {});\n            }\n            options.build(field);\n            field.form.reset(field.model);\n            if (options.parentForm && options.parentForm.control === field.formControl) {\n                options.parentForm.submitted = false;\n            }\n        };\n        options.updateInitialValue = (model) => (options._initialModel = clone(model ?? field.model));\n        field.options.updateInitialValue();\n    }\n    initFieldOptions(field) {\n        reverseDeepMerge(field, {\n            id: getFieldId(`formly_${this.formId}`, field, field.index),\n            hooks: {},\n            modelOptions: {},\n            validation: { messages: {} },\n            props: !field.type || !hasKey(field)\n                ? {}\n                : {\n                    label: '',\n                    placeholder: '',\n                    disabled: false,\n                },\n        });\n        if (this.config.extras.resetFieldOnHide && field.resetOnHide !== false) {\n            field.resetOnHide = true;\n        }\n        if (field.type !== 'formly-template' &&\n            (field.template || field.expressions?.template || field.expressionProperties?.template)) {\n            field.type = 'formly-template';\n        }\n        if (!field.type && field.fieldGroup) {\n            field.type = 'formly-group';\n        }\n        if (field.type) {\n            this.config.getMergedField(field);\n        }\n        if (hasKey(field) && !isUndefined(field.defaultValue) && isUndefined(getFieldValue(field))) {\n            const isHidden = (f) => f.hide || f.expressions?.hide || f.hideExpression;\n            let setDefaultValue = !field.resetOnHide || !isHidden(field);\n            if (!isHidden(field) && field.resetOnHide) {\n                let parent = field.parent;\n                while (parent && !isHidden(parent)) {\n                    parent = parent.parent;\n                }\n                setDefaultValue = !parent || !isHidden(parent);\n            }\n            if (setDefaultValue) {\n                assignFieldValue(field, field.defaultValue);\n            }\n        }\n        field.wrappers = field.wrappers || [];\n    }\n    getFieldComponentInstance(field) {\n        const componentRefInstance = () => {\n            let componentRef = this.config.resolveFieldTypeRef(field);\n            const fieldComponentRef = field._componentRefs?.slice(-1)[0];\n            if (fieldComponentRef instanceof ComponentRef &&\n                fieldComponentRef?.componentType === componentRef?.componentType) {\n                componentRef = fieldComponentRef;\n            }\n            return componentRef?.instance;\n        };\n        if (!field._proxyInstance) {\n            defineHiddenProp(field, '_proxyInstance', new Proxy({}, {\n                get: (_, prop) => componentRefInstance()?.[prop],\n                set: (_, prop, value) => (componentRefInstance()[prop] = value),\n            }));\n        }\n        return field._proxyInstance;\n    }\n}\n\nfunction defaultFormlyConfig(config) {\n    return {\n        types: [\n            { name: 'formly-group', component: FormlyGroup },\n            { name: 'formly-template', component: FormlyTemplateType },\n        ],\n        extensions: [\n            { name: 'core', extension: new CoreExtension(config), priority: -250 },\n            { name: 'field-validation', extension: new FieldValidationExtension(config), priority: -200 },\n            { name: 'field-form', extension: new FieldFormExtension(), priority: -150 },\n            { name: 'field-expression', extension: new FieldExpressionExtension(), priority: -100 },\n        ],\n    };\n}\nclass FormlyModule {\n    constructor(configService, configs = []) {\n        if (!configs) {\n            return;\n        }\n        configs.forEach((config) => configService.addConfig(config));\n    }\n    static forRoot(config = {}) {\n        return {\n            ngModule: FormlyModule,\n            providers: [\n                { provide: FORMLY_CONFIG, multi: true, useFactory: defaultFormlyConfig, deps: [FormlyConfig] },\n                { provide: FORMLY_CONFIG, useValue: config, multi: true },\n                FormlyConfig,\n                FormlyFormBuilder,\n            ],\n        };\n    }\n    static forChild(config = {}) {\n        return {\n            ngModule: FormlyModule,\n            providers: [\n                { provide: FORMLY_CONFIG, multi: true, useFactory: defaultFormlyConfig, deps: [FormlyConfig] },\n                { provide: FORMLY_CONFIG, useValue: config, multi: true },\n                FormlyFormBuilder,\n            ],\n        };\n    }\n}\nFormlyModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyModule, deps: [{ token: FormlyConfig }, { token: FORMLY_CONFIG, optional: true }], target: i0.ɵɵFactoryTarget.NgModule });\nFormlyModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyModule, declarations: [FormlyTemplate,\n        FormlyForm,\n        FormlyField,\n        FormlyAttributes,\n        FormlyGroup,\n        FormlyValidationMessage,\n        FormlyTemplateType], imports: [CommonModule], exports: [FormlyTemplate, FormlyForm, FormlyField, FormlyAttributes, FormlyGroup, FormlyValidationMessage] });\nFormlyModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyModule, imports: [[CommonModule]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.12\", ngImport: i0, type: FormlyModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [\n                        FormlyTemplate,\n                        FormlyForm,\n                        FormlyField,\n                        FormlyAttributes,\n                        FormlyGroup,\n                        FormlyValidationMessage,\n                        FormlyTemplateType,\n                    ],\n                    exports: [FormlyTemplate, FormlyForm, FormlyField, FormlyAttributes, FormlyGroup, FormlyValidationMessage],\n                    imports: [CommonModule],\n                }]\n        }], ctorParameters: function () { return [{ type: FormlyConfig }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [FORMLY_CONFIG]\n                }] }]; } });\n\n/*\n * Public API Surface of core\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { FORMLY_CONFIG, FieldArrayType, FieldType, FieldWrapper, FormlyConfig, FormlyField, FormlyForm, FormlyFormBuilder, FormlyModule, FormlyAttributes as ɵFormlyAttributes, FormlyGroup as ɵFormlyGroup, FormlyTemplate as ɵFormlyTemplate, FormlyValidationMessage as ɵFormlyValidationMessage, clone as ɵclone, defineHiddenProp as ɵdefineHiddenProp, getFieldValue as ɵgetFieldValue, hasKey as ɵhasKey, observe as ɵobserve, reverseDeepMerge as ɵreverseDeepMerge };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}